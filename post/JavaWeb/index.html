<!doctype html>
<html lang="zh-CN">
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>JavaWeb | 总结 | failcom</title>
    <meta property="og:title" content="JavaWeb | 总结 - failcom">
    <meta property="og:type" content="article">
        
    <meta property="article:published_time" content='2019-12-13T21:00:00&#43;08:00'>
        
        
    <meta property="article:modified_time" content='2019-12-13T21:00:00&#43;08:00'>
        
    <meta name="Keywords" content="">
    <meta name="description" content="JavaWeb | 总结">
        
    <meta name="author" content="failcom">
    <meta property="og:url" content="https://failcom.github.io/post/JavaWeb/">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">

    <link rel="stylesheet" href='/css/normalize.css'>
    <link rel="stylesheet" href='/css/style.css'>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
    (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-4031353640611810",
        enable_page_level_ads: true
    });
    </script>
    


    
    
        <link rel="stylesheet" href='/css/douban.css'>
    
        <link rel="stylesheet" href='/css/other.css'>
    
</head>


<body>
    <header id="header" class="clearfix">
    <div class="container">
        <div class="col-group">
            <div class="site-name ">
                
                    <a id="logo" href="https://failcom.github.io">
                        failcom
                    </a>
                
                <p class="description">0.0</p>
            </div>
            <div>
                <nav id="nav-menu" class="clearfix">
                    <a class="current" href="https://failcom.github.io">首页</a>
                    
                    <a  href="https://failcom.github.io/archives/" title="归档">归档</a>
                    
                    <a  href="https://failcom.github.io/about/" title="关于">关于</a>
                    
                </nav>
            </div>
        </div>
    </div>
</header>

    <div id="body">
        <div class="container">
            <div class="col-group">

                <div class="col-8" id="main">
                    
<div class="res-cons">
    <style type="text/css">
    .post-toc {
        position: fixed;
        width: 200px;
        margin-left: -210px;
        padding: 5px 10px;
        font-family: Athelas, STHeiti, Microsoft Yahei, serif;
        font-size: 12px;
        border: 1px solid rgba(0, 0, 0, .07);
        border-radius: 5px;
        background-color: rgba(255, 255, 255, 0.98);
        background-clip: padding-box;
        -webkit-box-shadow: 1px 1px 2px rgba(0, 0, 0, .125);
        box-shadow: 1px 1px 2px rgba(0, 0, 0, .125);
        word-wrap: break-word;
        white-space: nowrap;
        -webkit-box-sizing: border-box;
        box-sizing: border-box;
        z-index: 999;
        cursor: pointer;
        max-height: 70%;
        overflow-y: auto;
        overflow-x: hidden;
    }

    .post-toc .post-toc-title {
        width: 100%;
        margin: 0 auto;
        font-size: 20px;
        font-weight: 400;
        text-transform: uppercase;
        text-align: center;
    }

    .post-toc .post-toc-content {
        font-size: 15px;
    }

    .post-toc .post-toc-content>nav>ul {
        margin: 10px 0;
    }

    .post-toc .post-toc-content ul {
        padding-left: 20px;
        list-style: square;
        margin: 0.5em;
        line-height: 1.8em;
    }

    .post-toc .post-toc-content ul ul {
        padding-left: 15px;
        display: none;
    }

    @media print,
    screen and (max-width:1057px) {
        .post-toc {
            display: none;
        }
    }
</style>
<div class="post-toc" style="position: absolute; top: 188px;">
    <h2 class="post-toc-title">文章目录</h2>
    <div class="post-toc-content">
        <nav id="TableOfContents">
<ul>
<li><a href="#javaweb">JavaWeb</a>
<ul>
<li><a href="#1-基本概念">1、基本概念</a>
<ul>
<li><a href="#1-1-前言">1.1、前言</a></li>
<li><a href="#1-2-web应用程序">1.2、web应用程序</a></li>
<li><a href="#1-3-静态web">1.3、静态web</a></li>
<li><a href="#1-4-动态web">1.4、动态web</a></li>
</ul></li>
<li><a href="#2-web服务器">2、web服务器</a>
<ul>
<li><a href="#2-1-技术讲解">2.1、技术讲解</a></li>
<li><a href="#2-2-web服务器">2.2、web服务器</a></li>
</ul></li>
<li><a href="#3-tomcat">3、Tomcat</a>
<ul>
<li><a href="#3-1-安装tomcat">3.1、 安装tomcat</a></li>
<li><a href="#3-2-tomcat启动和配置">3.2、Tomcat启动和配置</a></li>
<li><a href="#3-3-配置">3.3、配置</a>
<ul>
<li><a href="#高难度面试题">高难度面试题：</a></li>
</ul></li>
<li><a href="#3-4-发布一个web网站">3.4、发布一个web网站</a></li>
</ul></li>
<li><a href="#4-http">4、Http</a>
<ul>
<li><a href="#4-1-什么是http">4.1、什么是HTTP</a></li>
<li><a href="#4-2-两个时代">4.2、两个时代</a></li>
<li><a href="#4-3-http请求">4.3、Http请求</a>
<ul>
<li><a href="#1-请求行">1、请求行</a></li>
<li><a href="#2-消息头">2、消息头</a></li>
</ul></li>
<li><a href="#4-4-http响应">4.4、Http响应</a>
<ul>
<li><a href="#1-响应体">1.响应体</a></li>
<li><a href="#2-响应状态码">2、响应状态码</a></li>
</ul></li>
</ul></li>
<li><a href="#5-maven">5、Maven</a>
<ul>
<li><a href="#5-1-maven项目架构管理工具">5.1 Maven项目架构管理工具</a></li>
<li><a href="#5-2-下载安装maven">5.2 下载安装Maven</a></li>
<li><a href="#5-3-配置环境变量">5.3 配置环境变量</a></li>
<li><a href="#5-4-阿里云镜像">5.4 阿里云镜像</a></li>
<li><a href="#5-5-本地仓库">5.5 本地仓库</a></li>
<li><a href="#5-6-在idea中使用maven">5.6、在IDEA中使用Maven</a></li>
<li><a href="#5-7-创建一个普通的maven项目">5.7、创建一个普通的Maven项目</a></li>
<li><a href="#5-8-标记文件夹功能">5.8 标记文件夹功能</a></li>
<li><a href="#5-9-在-idea中配置tomcat">5.9 在 IDEA中配置Tomcat</a></li>
<li><a href="#5-10-pom文件">5.10 pom文件</a></li>
<li><a href="#5-12-idea操作">5.12 IDEA操作</a></li>
<li><a href="#5-13-解决遇到的问题">5.13 解决遇到的问题</a></li>
</ul></li>
<li><a href="#6-servlet">6、Servlet</a>
<ul>
<li><a href="#6-1-servlet简介">6.1、Servlet简介</a></li>
<li><a href="#6-2-helloservlet">6.2、HelloServlet</a></li>
<li><a href="#6-3-servlet原理">6.3、Servlet原理</a></li>
<li><a href="#6-4-mapping问题">6.4、Mapping问题</a></li>
<li><a href="#6-5-servletcontext">6.5、ServletContext</a>
<ul>
<li><a href="#1-共享数据">1、共享数据</a></li>
<li><a href="#2-获取初始化参数">2、获取初始化参数</a></li>
<li><a href="#3-请求转发">3、请求转发</a></li>
<li><a href="#4-读取资源文件">4、读取资源文件</a></li>
</ul></li>
<li><a href="#6-6-httpservletresponse">6.6、HttpServletResponse</a>
<ul>
<li><a href="#1-简单分类">1、简单分类</a></li>
<li><a href="#2-下载文件">2、下载文件</a></li>
<li><a href="#3-验证码功能">3、验证码功能</a></li>
<li><a href="#4-实现重定向">4、实现重定向</a></li>
<li><a href="#5-简单实现登录重定向">5、简单实现登录重定向</a></li>
</ul></li>
<li><a href="#6-7-httpservletrequest">6.7、HttpServletRequest</a>
<ul>
<li><a href="#获取参数-请求转发">获取参数，请求转发</a></li>
</ul></li>
</ul></li>
<li><a href="#7-cookie-session">7、Cookie、Session</a>
<ul>
<li><a href="#7-1-会话">7.1、会话</a></li>
<li><a href="#7-2-保存会话的两种技术">7.2、保存会话的两种技术</a></li>
<li><a href="#7-3-cookie">7.3、Cookie</a></li>
<li><a href="#7-4-session-重点">7.4、Session（重点）</a></li>
</ul></li>
<li><a href="#8-jsp">8、JSP</a>
<ul>
<li><a href="#8-1-什么是jsp">8.1、什么是JSP</a></li>
<li><a href="#8-2-jsp原理">8.2、JSP原理</a></li>
<li><a href="#8-3-jsp基础语法">8.3、JSP基础语法</a>
<ul>
<li><a href="#jsp表达式"><strong>JSP表达式</strong></a></li>
<li><a href="#jsp脚本片段"><strong>jsp脚本片段</strong></a></li>
<li><a href="#jsp声明">JSP声明</a></li>
</ul></li>
<li><a href="#8-4-jsp指令">8.4、JSP指令</a></li>
<li><a href="#8-5-9大内置对象">8.5、9大内置对象</a></li>
<li><a href="#8-6-jsp标签-jstl标签-el表达式">8.6、JSP标签、JSTL标签、EL表达式</a></li>
</ul></li>
<li><a href="#9-javabean">9、JavaBean</a></li>
<li><a href="#10-mvc三层架构">10、MVC三层架构</a>
<ul>
<li><a href="#10-1-早些年">10.1、早些年</a></li>
<li><a href="#10-2-mvc三层架构">10.2、MVC三层架构</a></li>
</ul></li>
<li><a href="#11-filter-重点">11、Filter （重点）</a></li>
<li><a href="#12-监听器">12、监听器</a></li>
<li><a href="#13-过滤器-监听器常见应用">13、过滤器、监听器常见应用</a></li>
<li><a href="#14-jdbc">14、JDBC</a></li>
</ul></li>
</ul>
</nav>
    </div>
</div>
<script type="text/javascript">
    $(document).ready(function () {
        var postToc = $(".post-toc");
        if (postToc.length) {
            var leftPos = $("#main").offset().left;
            if(leftPos<220){
                postToc.css({"width":leftPos-10,"margin-left":(0-leftPos)})
            }

            var t = postToc.offset().top - 20,
                a = {
                    start: {
                        position: "absolute",
                        top: t
                    },
                    process: {
                        position: "fixed",
                        top: 20
                    },
                };
            $(window).scroll(function () {
                var e = $(window).scrollTop();
                e < t ? postToc.css(a.start) : postToc.css(a.process)
            })
        }
    })
</script>
    <article class="post">
        <header>
            <h1 class="post-title">JavaWeb | 总结</h1>
        </header>
        <date class="post-meta meta-date">
            2019年12月13日
        </date>
        
        <div class="post-meta">
            <span>|</span>
            
            <span class="meta-category"><a href='https://failcom.github.io/categories/JavaWeb'>JavaWeb</a></span>
            
        </div>
        
        
        <div class="post-meta">
            <span id="busuanzi_container_page_pv">|<span id="busuanzi_value_page_pv"></span><span>
                    阅读</span></span>
        </div>
        
        
        <div class="clear" style="display: none">
            <div class="toc-article">
                <div class="toc-title">文章目录</div>
            </div>
        </div>
        
        <div class="post-content">
            

<h1 id="javaweb">JavaWeb</h1>

<p>Java    Web</p>

<h2 id="1-基本概念">1、基本概念</h2>

<h3 id="1-1-前言">1.1、前言</h3>

<p>web开发：</p>

<ul>
<li>web，网页的意思  ， www.baidu.com</li>
<li>静态web

<ul>
<li>html，css</li>
<li>提供给所有人看的数据始终不会发生变化！</li>
</ul></li>
<li>动态web

<ul>
<li>淘宝，几乎是所有的网站；</li>
<li>提供给所有人看的数据始终会发生变化，每个人在不同的时间，不同的地点看到的信息各不相同！</li>
<li>技术栈：Servlet/JSP，ASP，PHP</li>
</ul></li>
</ul>

<p>在Java中，动态web资源开发的技术统称为JavaWeb；</p>

<h3 id="1-2-web应用程序">1.2、web应用程序</h3>

<p>web应用程序：可以提供浏览器访问的程序；</p>

<ul>
<li>a.html、b.html&hellip;&hellip;多个web资源，这些web资源可以被外界访问，对外界提供服务；</li>
<li>你们能访问到的任何一个页面或者资源，都存在于这个世界的某一个角落的计算机上。</li>
<li>URL</li>
<li>这个统一的web资源会被放在同一个文件夹下，web应用程序&ndash;&gt;Tomcat：服务器</li>
<li>一个web应用由多部分组成 （静态web，动态web）

<ul>
<li>html，css，js</li>
<li>jsp，servlet</li>
<li>Java程序</li>
<li>jar包</li>
<li>配置文件 （Properties）</li>
</ul></li>
</ul>

<p>web应用程序编写完毕后，若想提供给外界访问：需要一个服务器来统一管理；</p>

<h3 id="1-3-静态web">1.3、静态web</h3>

<ul>
<li>*.htm, *.html,这些都是网页的后缀，如果服务器上一直存在这些东西，我们就可以直接进行读取。通络；</li>
</ul>

<p><img src="/images/JavaWeb.assets/1567822802516.png" alt="1567822802516" /></p>

<ul>
<li>静态web存在的缺点

<ul>
<li>Web页面无法动态更新，所有用户看到都是同一个页面</li>
<li>轮播图，点击特效：伪动态</li>
<li>JavaScript [实际开发中，它用的最多]</li>
<li>VBScript</li>
<li>它无法和数据库交互（数据无法持久化，用户无法交互）</li>
</ul></li>
</ul>

<h3 id="1-4-动态web">1.4、动态web</h3>

<p>页面会动态展示： “Web的页面展示的效果因人而异”；</p>

<p><img src="/images/JavaWeb.assets/1567823191289.png" alt="1567823191289" /></p>

<p>缺点：</p>

<ul>
<li>加入服务器的动态web资源出现了错误，我们需要重新编写我们的<strong>后台程序</strong>,重新发布；

<ul>
<li>停机维护</li>
</ul></li>
</ul>

<p>优点：</p>

<ul>
<li>Web页面可以动态更新，所有用户看到都不是同一个页面</li>
<li>它可以与数据库交互 （数据持久化：注册，商品信息，用户信息&hellip;&hellip;..）</li>
</ul>

<p><img src="/images/JavaWeb.assets/1567823350584.png" alt="1567823350584" /></p>

<p>新手村：&ndash;魔鬼训练（分析原理，看源码）&ndash;&gt; PK场</p>

<h2 id="2-web服务器">2、web服务器</h2>

<h3 id="2-1-技术讲解">2.1、技术讲解</h3>

<p><strong>ASP:</strong></p>

<ul>
<li><p>微软：国内最早流行的就是ASP；</p></li>

<li><p>在HTML中嵌入了VB的脚本，  ASP + COM；</p></li>

<li><p>在ASP开发中，基本一个页面都有几千行的业务代码，页面极其换乱</p></li>

<li><p>维护成本高！</p></li>

<li><p>C#</p></li>

<li><p>IIS</p>

<pre><code class="language-html">&lt;h1&gt;
  &lt;h1&gt;&lt;h1&gt;
      &lt;h1&gt;
          &lt;h1&gt;
              &lt;h1&gt;
      &lt;h1&gt;
          &lt;%
          System.out.println(&quot;hello&quot;)
          %&gt;
          &lt;h1&gt;
              &lt;h1&gt;
 &lt;h1&gt;&lt;h1&gt;
&lt;h1&gt;
</code></pre></li>
</ul>

<p><strong>php：</strong></p>

<ul>
<li>PHP开发速度很快，功能很强大，跨平台，代码很简单 （70% , WP）</li>
<li>无法承载大访问量的情况（局限性）</li>
</ul>

<p>**JSP/Servlet : **</p>

<p>B/S：浏览和服务器</p>

<p>C/S:  客户端和服务器</p>

<ul>
<li>sun公司主推的B/S架构</li>
<li>基于Java语言的 (所有的大公司，或者一些开源的组件，都是用Java写的)</li>
<li>可以承载三高问题带来的影响；</li>
<li>语法像ASP ， ASP&ndash;&gt;JSP , 加强市场强度；</li>
</ul>

<p>&hellip;..</p>

<h3 id="2-2-web服务器">2.2、web服务器</h3>

<p>服务器是一种被动的操作，用来处理用户的一些请求和给用户一些响应信息；</p>

<p><strong>IIS</strong></p>

<p>微软的； ASP&hellip;,Windows中自带的</p>

<p><strong>Tomcat</strong></p>

<p><img src="/images/JavaWeb.assets/1567824446428.png" alt="1567824446428" /></p>

<p>面向百度编程；</p>

<p>Tomcat是Apache 软件基金会（Apache Software Foundation）的Jakarta 项目中的一个核心项目，最新的Servlet 和JSP 规范总是能在Tomcat 中得到体现，因为Tomcat 技术先进、性能稳定，而且<strong>免费</strong>，因而深受Java 爱好者的喜爱并得到了部分软件开发商的认可，成为目前比较流行的Web 应用服务器。</p>

<p>Tomcat 服务器是一个免费的开放源代码的Web 应用服务器，属于轻量级应用<a href="https://baike.baidu.com/item/服务器">服务器</a>，在中小型系统和并发访问用户不是很多的场合下被普遍使用，是开发和调试JSP 程序的首选。对于一个Java初学web的人来说，它是最佳的选择</p>

<p>Tomcat 实际上运行JSP 页面和Servlet。Tomcat最新版本为<strong>9.0。</strong></p>

<p>&hellip;.</p>

<p><strong>工作3-5年之后，可以尝试手写Tomcat服务器；</strong></p>

<p>下载tomcat：</p>

<ol>
<li>安装 or  解压</li>
<li>了解配置文件及目录结构</li>
<li>这个东西的作用</li>
</ol>

<h2 id="3-tomcat">3、Tomcat</h2>

<h3 id="3-1-安装tomcat">3.1、 安装tomcat</h3>

<p>tomcat官网：<a href="http://tomcat.apache.org/">http://tomcat.apache.org/</a></p>

<p><img src="/images/JavaWeb.assets/1567825600842.png" alt="1567825600842" /></p>

<p><img src="/images/JavaWeb.assets/1567825627138.png" alt="1567825627138" /></p>

<h3 id="3-2-tomcat启动和配置">3.2、Tomcat启动和配置</h3>

<p>文件夹作用：</p>

<p><img src="/images/JavaWeb.assets/1567825763180.png" alt="1567825763180" /></p>

<p><strong>启动。关闭Tomcat</strong></p>

<p><img src="/images/JavaWeb.assets/1567825840657.png" alt="1567825840657" /></p>

<p>访问测试：<a href="http://localhost:8080/">http://localhost:8080/</a></p>

<p>可能遇到的问题：</p>

<ol>
<li>Java环境变量没有配置</li>
<li>闪退问题：需要配置兼容性</li>
<li>乱码问题：配置文件中设置</li>
</ol>

<h3 id="3-3-配置">3.3、配置</h3>

<p><img src="/images/JavaWeb.assets/1567825967256.png" alt="1567825967256" /></p>

<p>可以配置启动的端口号</p>

<ul>
<li>tomcat的默认端口号为：8080</li>
<li>mysql：3306</li>
<li>http：80</li>

<li><p>https：443</p>

<pre><code class="language-xml">&lt;Connector port=&quot;8081&quot; protocol=&quot;HTTP/1.1&quot;
       connectionTimeout=&quot;20000&quot;
       redirectPort=&quot;8443&quot; /&gt;
</code></pre></li>
</ul>

<p>可以配置主机的名称</p>

<ul>
<li>默认的主机名为：localhost-&gt;127.0.0.1</li>

<li><p>默认网站应用存放的位置为：webapps</p>

<pre><code class="language-xml">&lt;Host name=&quot;www.qinjiang.com&quot;  appBase=&quot;webapps&quot;
    unpackWARs=&quot;true&quot; autoDeploy=&quot;true&quot;&gt;
</code></pre></li>
</ul>

<h4 id="高难度面试题">高难度面试题：</h4>

<p>请你谈谈网站是如何进行访问的！</p>

<ol>
<li><p>输入一个域名；回车</p></li>

<li><p>检查本机的 C:\Windows\System32\drivers\etc\hosts配置文件下有没有这个域名映射；</p>

<ol>
<li><p>有：直接返回对应的ip地址，这个地址中，有我们需要访问的web程序，可以直接访问</p>

<pre><code class="language-java">127.0.0.1       www.qinjiang.com
</code></pre></li>

<li><p>没有：去DNS服务器找，找到的话就返回，找不到就返回找不到；</p></li>
</ol></li>
</ol>

<p><img src="/images/JavaWeb.assets/1567827057913.png" alt="1567827057913" /></p>

<ol>
<li>可以配置一下环境变量（可选性）</li>
</ol>

<h3 id="3-4-发布一个web网站">3.4、发布一个web网站</h3>

<p>不会就先模仿</p>

<ul>
<li>将自己写的网站，放到服务器(Tomcat)中指定的web应用的文件夹（webapps）下，就可以访问了</li>
</ul>

<p>网站应该有的结构</p>

<pre><code class="language-java">--webapps ：Tomcat服务器的web目录
	-ROOT
	-kuangstudy ：网站的目录名
		- WEB-INF
			-classes : java程序
			-lib：web应用所依赖的jar包
			-web.xml ：网站配置文件
		- index.html 默认的首页
		- static 
            -css
            	-style.css
            -js
            -img
         -.....
</code></pre>

<p>HTTP协议 ： 面试</p>

<p>Maven：构建工具</p>

<ul>
<li>Maven安装包</li>
</ul>

<p>Servlet 入门</p>

<ul>
<li>HelloWorld！</li>
<li>Servlet配置</li>
<li>原理</li>
</ul>

<h2 id="4-http">4、Http</h2>

<h3 id="4-1-什么是http">4.1、什么是HTTP</h3>

<p>HTTP（超文本传输协议）是一个简单的请求-响应协议，它通常运行在TCP之上。</p>

<ul>
<li>文本：html，字符串，~ ….</li>
<li>超文本：图片，音乐，视频，定位，地图…….</li>
<li>80</li>
</ul>

<p>Https：安全的</p>

<ul>
<li>443</li>
</ul>

<h3 id="4-2-两个时代">4.2、两个时代</h3>

<ul>
<li><p>http1.0</p>

<ul>
<li>HTTP/1.0：客户端可以与web服务器连接后，只能获得一个web资源，断开连接</li>
</ul></li>

<li><p>http2.0</p>

<ul>
<li>HTTP/1.1：客户端可以与web服务器连接后，可以获得多个web资源。‘

<br /></li>
</ul></li>
</ul>

<h3 id="4-3-http请求">4.3、Http请求</h3>

<ul>
<li>客户端&mdash;发请求（Request）&mdash;服务器</li>
</ul>

<p>百度：</p>

<pre><code class="language-java">Request URL:https://www.baidu.com/   请求地址
Request Method:GET    get方法/post方法
Status Code:200 OK    状态码：200
Remote（远程） Address:14.215.177.39:443
</code></pre>

<pre><code class="language-java">Accept:text/html  
Accept-Encoding:gzip, deflate, br
Accept-Language:zh-CN,zh;q=0.9    语言
Cache-Control:max-age=0
Connection:keep-alive
</code></pre>

<h4 id="1-请求行">1、请求行</h4>

<ul>
<li>请求行中的请求方式：GET</li>
<li>请求方式：<strong>Get，Post</strong>，HEAD,DELETE,PUT,TRACT…

<ul>
<li>get：请求能够携带的参数比较少，大小有限制，会在浏览器的URL地址栏显示数据内容，不安全，但高效</li>
<li>post：请求能够携带的参数没有限制，大小没有限制，不会在浏览器的URL地址栏显示数据内容，安全，但不高效。</li>
</ul></li>
</ul>

<h4 id="2-消息头">2、消息头</h4>

<pre><code class="language-java">Accept：告诉浏览器，它所支持的数据类型
Accept-Encoding：支持哪种编码格式  GBK   UTF-8   GB2312  ISO8859-1
Accept-Language：告诉浏览器，它的语言环境
Cache-Control：缓存控制
Connection：告诉浏览器，请求完成是断开还是保持连接
HOST：主机..../.
</code></pre>

<h3 id="4-4-http响应">4.4、Http响应</h3>

<ul>
<li>服务器&mdash;响应&mdash;&ndash;客户端</li>
</ul>

<p>百度：</p>

<pre><code class="language-java">Cache-Control:private    缓存控制
Connection:Keep-Alive    连接
Content-Encoding:gzip    编码
Content-Type:text/html   类型
</code></pre>

<h4 id="1-响应体">1.响应体</h4>

<pre><code class="language-java">Accept：告诉浏览器，它所支持的数据类型
Accept-Encoding：支持哪种编码格式  GBK   UTF-8   GB2312  ISO8859-1
Accept-Language：告诉浏览器，它的语言环境
Cache-Control：缓存控制
Connection：告诉浏览器，请求完成是断开还是保持连接
HOST：主机..../.
Refresh：告诉客户端，多久刷新一次；
Location：让网页重新定位；
</code></pre>

<h4 id="2-响应状态码">2、响应状态码</h4>

<p>200：请求响应成功  200</p>

<p>3xx：请求重定向</p>

<ul>
<li>重定向：你重新到我给你新位置去；</li>
</ul>

<p>4xx：找不到资源   404</p>

<ul>
<li>资源不存在；</li>
</ul>

<p>5xx：服务器代码错误   500       502:网关错误</p>

<p><strong>常见面试题：</strong></p>

<p>当你的浏览器中地址栏输入地址并回车的一瞬间到页面能够展示回来，经历了什么？</p>

<h2 id="5-maven">5、Maven</h2>

<p><strong>我为什么要学习这个技术？</strong></p>

<ol>
<li><p>在Javaweb开发中，需要使用大量的jar包，我们手动去导入；</p></li>

<li><p>如何能够让一个东西自动帮我导入和配置这个jar包。</p></li>
</ol>

<p>由此，Maven诞生了！</p>

<h3 id="5-1-maven项目架构管理工具">5.1 Maven项目架构管理工具</h3>

<p>我们目前用来就是方便导入jar包的！</p>

<p>Maven的核心思想：<strong>约定大于配置</strong></p>

<ul>
<li>有约束，不要去违反。</li>
</ul>

<p>Maven会规定好你该如何去编写我们的Java代码，必须要按照这个规范来；</p>

<h3 id="5-2-下载安装maven">5.2 下载安装Maven</h3>

<p>官网;<a href="https://maven.apache.org/">https://maven.apache.org/</a></p>

<p><img src="/images/JavaWeb.assets/1567842350606.png" alt="1567842350606" /></p>

<p>下载完成后，解压即可；</p>

<p>小狂神友情建议：电脑上的所有环境都放在一个文件夹下，方便管理；</p>

<h3 id="5-3-配置环境变量">5.3 配置环境变量</h3>

<p>在我们的系统环境变量中</p>

<p>配置如下配置：</p>

<ul>
<li>M2_HOME     maven目录下的bin目录</li>
<li>MAVEN_HOME      maven的目录</li>
<li>在系统的path中配置  %MAVEN_HOME%\bin</li>
</ul>

<p><img src="/images/JavaWeb.assets/1567842882993.png" alt="1567842882993" /></p>

<p>测试Maven是否安装成功，保证必须配置完毕！</p>

<h3 id="5-4-阿里云镜像">5.4 阿里云镜像</h3>

<p><img src="/images/JavaWeb.assets/1567844609399.png" alt="1567844609399" /></p>

<ul>
<li>镜像：mirrors

<ul>
<li>作用：加速我们的下载</li>
</ul></li>

<li><p>国内建议使用阿里云的镜像</p>

<pre><code class="language-xml">&lt;mirror&gt;
&lt;id&gt;nexus-aliyun&lt;/id&gt;  
&lt;mirrorOf&gt;*,!jeecg,!jeecg-snapshots&lt;/mirrorOf&gt;  
&lt;name&gt;Nexus aliyun&lt;/name&gt;  
&lt;url&gt;http://maven.aliyun.com/nexus/content/groups/public&lt;/url&gt; 
&lt;/mirror&gt;
</code></pre></li>
</ul>

<h3 id="5-5-本地仓库">5.5 本地仓库</h3>

<p>在本地的仓库，远程仓库；</p>

<p><strong>建立一个本地仓库：</strong>localRepository</p>

<pre><code class="language-xml">&lt;localRepository&gt;D:\Environment\apache-maven-3.6.2\maven-repo&lt;/localRepository&gt;
</code></pre>

<h3 id="5-6-在idea中使用maven">5.6、在IDEA中使用Maven</h3>

<ol>
<li><p>启动IDEA</p></li>

<li><p>创建一个MavenWeb项目</p></li>
</ol>

<p><img src="/images/JavaWeb.assets/1567844785602.png" alt="1567844785602" /></p>

<p><img src="/images/JavaWeb.assets/1567844841172.png" alt="1567844841172" /></p>

<p><img src="/images/JavaWeb.assets/1567844917185.png" alt="1567844917185" /></p>

<p><img src="/images/JavaWeb.assets/1567844956177.png" alt="1567844956177" /></p>

<p><img src="/images/JavaWeb.assets/1567845029864.png" alt="1567845029864" /></p>

<ol>
<li>等待项目初始化完毕</li>
</ol>

<p><img src="/images/JavaWeb.assets/1567845105970.png" alt="1567845105970" /></p>

<p><img src="/images/JavaWeb.assets/1567845137978.png" alt="1567845137978" /></p>

<ol>
<li><p>观察maven仓库中多了什么东西？</p></li>

<li><p>IDEA中的Maven设置</p></li>
</ol>

<p>注意：IDEA项目创建成功后，看一眼Maven的配置</p>

<p><img src="/images/JavaWeb.assets/1567845341956.png" alt="1567845341956" /></p>

<p><img src="/images/JavaWeb.assets/1567845413672.png" alt="1567845413672" /></p>

<ol>
<li>到这里，Maven在IDEA中的配置和使用就OK了!</li>
</ol>

<h3 id="5-7-创建一个普通的maven项目">5.7、创建一个普通的Maven项目</h3>

<p><img src="/images/JavaWeb.assets/1567845557744.png" alt="1567845557744" /></p>

<p><img src="/images/JavaWeb.assets/1567845717377.png" alt="1567845717377" /></p>

<p>这个只有在Web应用下才会有！</p>

<p><img src="/images/JavaWeb.assets/1567845782034.png" alt="1567845782034" /></p>

<h3 id="5-8-标记文件夹功能">5.8 标记文件夹功能</h3>

<p><img src="/images/JavaWeb.assets/1567845910728.png" alt="1567845910728" /></p>

<p><img src="/images/JavaWeb.assets/1567845957139.png" alt="1567845957139" /></p>

<p><img src="/images/JavaWeb.assets/1567846034906.png" alt="1567846034906" /></p>

<p><img src="/images/JavaWeb.assets/1567846073511.png" alt="1567846073511" /></p>

<h3 id="5-9-在-idea中配置tomcat">5.9 在 IDEA中配置Tomcat</h3>

<p><img src="/images/JavaWeb.assets/1567846140348.png" alt="1567846140348" /></p>

<p><img src="/images/JavaWeb.assets/1567846179573.png" alt="1567846179573" /></p>

<p><img src="/images/JavaWeb.assets/1567846234175.png" alt="1567846234175" /></p>

<p><img src="/images/JavaWeb.assets/1567846369751.png" alt="1567846369751" /></p>

<p>解决警告问题</p>

<p>必须要的配置：<strong>为什么会有这个问题：我们访问一个网站，需要指定一个文件夹名字；</strong></p>

<p><img src="/images/JavaWeb.assets/1567846421963.png" alt="1567846421963" /></p>

<p><img src="/images/JavaWeb.assets/1567846546465.png" alt="1567846546465" /></p>

<p><img src="/images/JavaWeb.assets/1567846559111.png" alt="1567846559111" /></p>

<p><img src="/images/JavaWeb.assets/1567846640372.png" alt="1567846640372" /></p>

<h3 id="5-10-pom文件">5.10 pom文件</h3>

<p>pom.xml 是Maven的核心配置文件</p>

<p><img src="/images/JavaWeb.assets/1567846784849.png" alt="1567846784849" /></p>

<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;

&lt;!--Maven版本和头文件--&gt;
&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;
  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;

  &lt;!--这里就是我们刚才配置的GAV--&gt;
  &lt;groupId&gt;com.kuang&lt;/groupId&gt;
  &lt;artifactId&gt;javaweb-01-maven&lt;/artifactId&gt;
  &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
  &lt;!--Package：项目的打包方式
  jar：java应用
  war：JavaWeb应用
  --&gt;
  &lt;packaging&gt;war&lt;/packaging&gt;


  &lt;!--配置--&gt;
  &lt;properties&gt;
    &lt;!--项目的默认构建编码--&gt;
    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;
    &lt;!--编码版本--&gt;
    &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;
    &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;
  &lt;/properties&gt;

  &lt;!--项目依赖--&gt;
  &lt;dependencies&gt;
    &lt;!--具体依赖的jar包配置文件--&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;junit&lt;/groupId&gt;
      &lt;artifactId&gt;junit&lt;/artifactId&gt;
      &lt;version&gt;4.11&lt;/version&gt;
    &lt;/dependency&gt;
  &lt;/dependencies&gt;

  &lt;!--项目构建用的东西--&gt;
  &lt;build&gt;
    &lt;finalName&gt;javaweb-01-maven&lt;/finalName&gt;
    &lt;pluginManagement&gt;&lt;!-- lock down plugins versions to avoid using Maven defaults (may be moved to parent pom) --&gt;
      &lt;plugins&gt;
        &lt;plugin&gt;
          &lt;artifactId&gt;maven-clean-plugin&lt;/artifactId&gt;
          &lt;version&gt;3.1.0&lt;/version&gt;
        &lt;/plugin&gt;
        &lt;!-- see http://maven.apache.org/ref/current/maven-core/default-bindings.html#Plugin_bindings_for_war_packaging --&gt;
        &lt;plugin&gt;
          &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;
          &lt;version&gt;3.0.2&lt;/version&gt;
        &lt;/plugin&gt;
        &lt;plugin&gt;
          &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;
          &lt;version&gt;3.8.0&lt;/version&gt;
        &lt;/plugin&gt;
        &lt;plugin&gt;
          &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;
          &lt;version&gt;2.22.1&lt;/version&gt;
        &lt;/plugin&gt;
        &lt;plugin&gt;
          &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;
          &lt;version&gt;3.2.2&lt;/version&gt;
        &lt;/plugin&gt;
        &lt;plugin&gt;
          &lt;artifactId&gt;maven-install-plugin&lt;/artifactId&gt;
          &lt;version&gt;2.5.2&lt;/version&gt;
        &lt;/plugin&gt;
        &lt;plugin&gt;
          &lt;artifactId&gt;maven-deploy-plugin&lt;/artifactId&gt;
          &lt;version&gt;2.8.2&lt;/version&gt;
        &lt;/plugin&gt;
      &lt;/plugins&gt;
    &lt;/pluginManagement&gt;
  &lt;/build&gt;
&lt;/project&gt;

</code></pre>

<p><img src="/images/JavaWeb.assets/1567847410771.png" alt="1567847410771" /></p>

<p>maven由于他的约定大于配置，我们之后可以能遇到我们写的配置文件，无法被导出或者生效的问题，解决方案：</p>

<pre><code class="language-xml">&lt;!--在build中配置resources，来防止我们资源导出失败的问题--&gt;
&lt;build&gt;
    &lt;resources&gt;
        &lt;resource&gt;
            &lt;directory&gt;src/main/resources&lt;/directory&gt;
            &lt;includes&gt;
                &lt;include&gt;**/*.properties&lt;/include&gt;
                &lt;include&gt;**/*.xml&lt;/include&gt;
            &lt;/includes&gt;
            &lt;filtering&gt;true&lt;/filtering&gt;
        &lt;/resource&gt;
        &lt;resource&gt;
            &lt;directory&gt;src/main/java&lt;/directory&gt;
            &lt;includes&gt;
                &lt;include&gt;**/*.properties&lt;/include&gt;
                &lt;include&gt;**/*.xml&lt;/include&gt;
            &lt;/includes&gt;
            &lt;filtering&gt;true&lt;/filtering&gt;
        &lt;/resource&gt;
    &lt;/resources&gt;
&lt;/build&gt;
</code></pre>

<h3 id="5-12-idea操作">5.12 IDEA操作</h3>

<p><img src="/images/JavaWeb.assets/1567847630808.png" alt="1567847630808" /></p>

<p><img src="/images/JavaWeb.assets/1567847662429.png" alt="1567847662429" /></p>

<h3 id="5-13-解决遇到的问题">5.13 解决遇到的问题</h3>

<ol>
<li>Maven 3.6.2</li>
</ol>

<p>解决方法：降级为3.6.1</p>

<p><img src="/images/JavaWeb.assets/1567904721301.png" alt="1567904721301" /></p>

<ol>
<li><p>Tomcat闪退</p></li>

<li><p>IDEA中每次都要重复配置Maven
在IDEA中的全局默认配置中去配置</p></li>
</ol>

<p><img src="/images/JavaWeb.assets/1567905247201.png" alt="1567905247201" /></p>

<p><img src="/images/JavaWeb.assets/1567905291002.png" alt="1567905291002" /></p>

<ol>
<li><p>Maven项目中Tomcat无法配置</p></li>

<li><p>maven默认web项目中的web.xml版本问题</p></li>
</ol>

<p><img src="/images/JavaWeb.assets/1567905537026.png" alt="1567905537026" /></p>

<ol>
<li><p>替换为webapp4.0版本和tomcat一致</p>

<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;web-app xmlns=&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;
        xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
        xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/javaee
                     http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;
        version=&quot;4.0&quot;
        metadata-complete=&quot;true&quot;&gt;
   
   
   
&lt;/web-app&gt;
</code></pre></li>

<li><p>Maven仓库的使用</p></li>
</ol>

<p>地址：<a href="https://mvnrepository.com/">https://mvnrepository.com/</a></p>

<p><img src="/images/JavaWeb.assets/1567905870750.png" alt="1567905870750" /></p>

<p><img src="/images/JavaWeb.assets/1567905982979.png" alt="1567905982979" /></p>

<p><img src="/images/JavaWeb.assets/1567906017448.png" alt="1567906017448" /></p>

<p><img src="/images/JavaWeb.assets/1567906039469.png" alt="1567906039469" /></p>

<h2 id="6-servlet">6、Servlet</h2>

<h3 id="6-1-servlet简介">6.1、Servlet简介</h3>

<ul>
<li>Servlet就是sun公司开发动态web的一门技术</li>
<li>Sun在这些API中提供一个接口叫做：Servlet，如果你想开发一个Servlet程序，只需要完成两个小步骤：

<ul>
<li>编写一个类，实现Servlet接口</li>
<li>把开发好的Java类部署到web服务器中。</li>
</ul></li>
</ul>

<p><strong>把实现了Servlet接口的Java程序叫做，Servlet</strong></p>

<h3 id="6-2-helloservlet">6.2、HelloServlet</h3>

<p>Serlvet接口Sun公司有两个默认的实现类：HttpServlet，GenericServlet</p>

<ol>
<li><p>构建一个普通的Maven项目，删掉里面的src目录，以后我们的学习就在这个项目里面建立Moudel；这个空的工程就是Maven主工程；</p></li>

<li><p>关于Maven父子工程的理解：</p></li>
</ol>

<p>父项目中会有</p>

<pre><code class="language-xml">       &lt;modules&gt;
           &lt;module&gt;servlet-01&lt;/module&gt;
       &lt;/modules&gt;
</code></pre>

<p>子项目会有</p>

<pre><code class="language-xml">       &lt;parent&gt;
           &lt;artifactId&gt;javaweb-02-servlet&lt;/artifactId&gt;
           &lt;groupId&gt;com.kuang&lt;/groupId&gt;
           &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
       &lt;/parent&gt;
</code></pre>

<p>父项目中的java子项目可以直接使用</p>

<pre><code class="language-java">   son extends father
</code></pre>

<ol>
<li><p>Maven环境优化</p>

<ol>
<li>修改web.xml为最新的</li>
<li>将maven的结构搭建完整</li>
</ol></li>

<li><p>编写一个Servlet程序</p></li>
</ol>

<p><img src="/images/JavaWeb.assets/1567911804700.png" alt="1567911804700" /></p>

<ol>
<li><p>编写一个普通类</p></li>

<li><p>实现Servlet接口，这里我们直接继承HttpServlet</p>

<pre><code class="language-java">  public class HelloServlet extends HttpServlet {
          
      //由于get或者post只是请求实现的不同的方式，可以相互调用，业务逻辑都一样；
      @Override
      protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
          //ServletOutputStream outputStream = resp.getOutputStream();
          PrintWriter writer = resp.getWriter(); //响应流
          writer.print(&quot;Hello,Serlvet&quot;);
      }
      
      @Override
      protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
          doGet(req, resp);
      }
  }
      
</code></pre></li>

<li><p>编写Servlet的映射</p></li>
</ol>

<p>为什么需要映射：我们写的是JAVA程序，但是要通过浏览器访问，而浏览器需要连接web服务器，所以我们需要再web服务中注册我们写的Servlet，还需给他一个浏览器能够访问的路径；</p>

<pre><code class="language-xml">   
       &lt;!--注册Servlet--&gt;
       &lt;servlet&gt;
           &lt;servlet-name&gt;hello&lt;/servlet-name&gt;
           &lt;servlet-class&gt;com.kuang.servlet.HelloServlet&lt;/servlet-class&gt;
       &lt;/servlet&gt;
       &lt;!--Servlet的请求路径--&gt;
       &lt;servlet-mapping&gt;
           &lt;servlet-name&gt;hello&lt;/servlet-name&gt;
           &lt;url-pattern&gt;/hello&lt;/url-pattern&gt;
       &lt;/servlet-mapping&gt;
   
</code></pre>

<ol>
<li>配置Tomcat</li>
</ol>

<p>注意：配置项目发布的路径就可以了</p>

<ol>
<li>启动测试，OK！</li>
</ol>

<h3 id="6-3-servlet原理">6.3、Servlet原理</h3>

<p>Servlet是由Web服务器调用，web服务器在收到浏览器请求之后，会：</p>

<p><img src="/images/JavaWeb.assets/1567913793252.png" alt="1567913793252" /></p>

<h3 id="6-4-mapping问题">6.4、Mapping问题</h3>

<ol>
<li><p>一个Servlet可以指定一个映射路径</p>

<pre><code class="language-xml">   &lt;servlet-mapping&gt;
       &lt;servlet-name&gt;hello&lt;/servlet-name&gt;
       &lt;url-pattern&gt;/hello&lt;/url-pattern&gt;
   &lt;/servlet-mapping&gt;
</code></pre></li>

<li><p>一个Servlet可以指定多个映射路径</p>

<pre><code class="language-xml">   &lt;servlet-mapping&gt;
       &lt;servlet-name&gt;hello&lt;/servlet-name&gt;
       &lt;url-pattern&gt;/hello&lt;/url-pattern&gt;
   &lt;/servlet-mapping&gt;
   &lt;servlet-mapping&gt;
       &lt;servlet-name&gt;hello&lt;/servlet-name&gt;
       &lt;url-pattern&gt;/hello2&lt;/url-pattern&gt;
   &lt;/servlet-mapping&gt;
   &lt;servlet-mapping&gt;
       &lt;servlet-name&gt;hello&lt;/servlet-name&gt;
       &lt;url-pattern&gt;/hello3&lt;/url-pattern&gt;
   &lt;/servlet-mapping&gt;
   &lt;servlet-mapping&gt;
       &lt;servlet-name&gt;hello&lt;/servlet-name&gt;
       &lt;url-pattern&gt;/hello4&lt;/url-pattern&gt;
   &lt;/servlet-mapping&gt;
   &lt;servlet-mapping&gt;
       &lt;servlet-name&gt;hello&lt;/servlet-name&gt;
       &lt;url-pattern&gt;/hello5&lt;/url-pattern&gt;
   &lt;/servlet-mapping&gt;
   
</code></pre></li>

<li><p>一个Servlet可以指定通用映射路径</p>

<pre><code class="language-xml">   &lt;servlet-mapping&gt;
       &lt;servlet-name&gt;hello&lt;/servlet-name&gt;
       &lt;url-pattern&gt;/hello/*&lt;/url-pattern&gt;
   &lt;/servlet-mapping&gt;
</code></pre></li>

<li><p>默认请求路径</p>

<pre><code class="language-xml">   &lt;!--默认请求路径--&gt;
   &lt;servlet-mapping&gt;
       &lt;servlet-name&gt;hello&lt;/servlet-name&gt;
       &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
   &lt;/servlet-mapping&gt;
</code></pre></li>

<li><p>指定一些后缀或者前缀等等….</p>

<pre><code class="language-xml">   
&lt;!--可以自定义后缀实现请求映射
   注意点，*前面不能加项目映射的路径
   hello/sajdlkajda.qinjiang
   --&gt;
&lt;servlet-mapping&gt;
   &lt;servlet-name&gt;hello&lt;/servlet-name&gt;
   &lt;url-pattern&gt;*.qinjiang&lt;/url-pattern&gt;
&lt;/servlet-mapping&gt;
</code></pre></li>

<li><p>优先级问题
指定了固有的映射路径优先级最高，如果找不到就会走默认的处理请求；</p>

<pre><code class="language-xml">&lt;!--404--&gt;
&lt;servlet&gt;
   &lt;servlet-name&gt;error&lt;/servlet-name&gt;
   &lt;servlet-class&gt;com.kuang.servlet.ErrorServlet&lt;/servlet-class&gt;
&lt;/servlet&gt;
&lt;servlet-mapping&gt;
   &lt;servlet-name&gt;error&lt;/servlet-name&gt;
   &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
&lt;/servlet-mapping&gt;
   
</code></pre></li>
</ol>

<h3 id="6-5-servletcontext">6.5、ServletContext</h3>

<p>web容器在启动的时候，它会为每个web程序都创建一个对应的ServletContext对象，它代表了当前的web应用；</p>

<h4 id="1-共享数据">1、共享数据</h4>

<p>我在这个Servlet中保存的数据，可以在另外一个servlet中拿到；</p>

<pre><code class="language-java">public class HelloServlet extends HttpServlet {
    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        
        //this.getInitParameter()   初始化参数
        //this.getServletConfig()   Servlet配置
        //this.getServletContext()  Servlet上下文
        ServletContext context = this.getServletContext();

        String username = &quot;秦疆&quot;; //数据
        context.setAttribute(&quot;username&quot;,username); //将一个数据保存在了ServletContext中，名字为：username 。值 username

    }

}

</code></pre>

<pre><code class="language-java">public class GetServlet extends HttpServlet {
    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        ServletContext context = this.getServletContext();
        String username = (String) context.getAttribute(&quot;username&quot;);

        resp.setContentType(&quot;text/html&quot;);
        resp.setCharacterEncoding(&quot;utf-8&quot;);
        resp.getWriter().print(&quot;名字&quot;+username);

    }

    @Override
    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        doGet(req, resp);
    }
}

</code></pre>

<pre><code class="language-XML">    &lt;servlet&gt;
        &lt;servlet-name&gt;hello&lt;/servlet-name&gt;
        &lt;servlet-class&gt;com.kuang.servlet.HelloServlet&lt;/servlet-class&gt;
    &lt;/servlet&gt;
    &lt;servlet-mapping&gt;
        &lt;servlet-name&gt;hello&lt;/servlet-name&gt;
        &lt;url-pattern&gt;/hello&lt;/url-pattern&gt;
    &lt;/servlet-mapping&gt;


    &lt;servlet&gt;
        &lt;servlet-name&gt;getc&lt;/servlet-name&gt;
        &lt;servlet-class&gt;com.kuang.servlet.GetServlet&lt;/servlet-class&gt;
    &lt;/servlet&gt;
    &lt;servlet-mapping&gt;
        &lt;servlet-name&gt;getc&lt;/servlet-name&gt;
        &lt;url-pattern&gt;/getc&lt;/url-pattern&gt;
    &lt;/servlet-mapping&gt;
</code></pre>

<p>测试访问结果；</p>

<h4 id="2-获取初始化参数">2、获取初始化参数</h4>

<pre><code class="language-xml">    &lt;!--配置一些web应用初始化参数--&gt;
    &lt;context-param&gt;
        &lt;param-name&gt;url&lt;/param-name&gt;
        &lt;param-value&gt;jdbc:mysql://localhost:3306/mybatis&lt;/param-value&gt;
    &lt;/context-param&gt;
</code></pre>

<pre><code class="language-java">protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
    ServletContext context = this.getServletContext();
    String url = context.getInitParameter(&quot;url&quot;);
    resp.getWriter().print(url);
}
</code></pre>

<h4 id="3-请求转发">3、请求转发</h4>

<pre><code class="language-java">@Override
protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
    ServletContext context = this.getServletContext();
    System.out.println(&quot;进入了ServletDemo04&quot;);
    //RequestDispatcher requestDispatcher = context.getRequestDispatcher(&quot;/gp&quot;); //转发的请求路径
    //requestDispatcher.forward(req,resp); //调用forward实现请求转发；
    context.getRequestDispatcher(&quot;/gp&quot;).forward(req,resp);
}
</code></pre>

<p><img src="/images/JavaWeb.assets/1567924457532.png" alt="1567924457532" /></p>

<h4 id="4-读取资源文件">4、读取资源文件</h4>

<p>Properties</p>

<ul>
<li>在java目录下新建properties</li>
<li>在resources目录下新建properties</li>
</ul>

<p>发现：都被打包到了同一个路径下：classes，我们俗称这个路径为classpath:</p>

<p>思路：需要一个文件流；</p>

<pre><code class="language-properties">username=root12312
password=zxczxczxc
</code></pre>

<pre><code class="language-java">public class ServletDemo05 extends HttpServlet {
    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {

        InputStream is = this.getServletContext().getResourceAsStream(&quot;/WEB-INF/classes/com/kuang/servlet/aa.properties&quot;);

        Properties prop = new Properties();
        prop.load(is);
        String user = prop.getProperty(&quot;username&quot;);
        String pwd = prop.getProperty(&quot;password&quot;);

        resp.getWriter().print(user+&quot;:&quot;+pwd);

    }

    @Override
    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        doGet(req, resp);
    }
}

</code></pre>

<p>访问测试即可ok；</p>

<h3 id="6-6-httpservletresponse">6.6、HttpServletResponse</h3>

<p>web服务器接收到客户端的http请求，针对这个请求，分别创建一个代表请求的HttpServletRequest对象，代表响应的一个HttpServletResponse；</p>

<ul>
<li>如果要获取客户端请求过来的参数：找HttpServletRequest</li>
<li>如果要给客户端响应一些信息：找HttpServletResponse</li>
</ul>

<h4 id="1-简单分类">1、简单分类</h4>

<p>负责向浏览器发送数据的方法</p>

<pre><code class="language-java">ServletOutputStream getOutputStream() throws IOException;
PrintWriter getWriter() throws IOException;
</code></pre>

<p>负责向浏览器发送响应头的方法</p>

<pre><code class="language-java">    void setCharacterEncoding(String var1);

    void setContentLength(int var1);

    void setContentLengthLong(long var1);

    void setContentType(String var1);

    void setDateHeader(String var1, long var2);

    void addDateHeader(String var1, long var2);

    void setHeader(String var1, String var2);

    void addHeader(String var1, String var2);

    void setIntHeader(String var1, int var2);

    void addIntHeader(String var1, int var2);
</code></pre>

<p>响应的状态码</p>

<pre><code class="language-java">    int SC_CONTINUE = 100;
    int SC_SWITCHING_PROTOCOLS = 101;
    int SC_OK = 200;
    int SC_CREATED = 201;
    int SC_ACCEPTED = 202;
    int SC_NON_AUTHORITATIVE_INFORMATION = 203;
    int SC_NO_CONTENT = 204;
    int SC_RESET_CONTENT = 205;
    int SC_PARTIAL_CONTENT = 206;
    int SC_MULTIPLE_CHOICES = 300;
    int SC_MOVED_PERMANENTLY = 301;
    int SC_MOVED_TEMPORARILY = 302;
    int SC_FOUND = 302;
    int SC_SEE_OTHER = 303;
    int SC_NOT_MODIFIED = 304;
    int SC_USE_PROXY = 305;
    int SC_TEMPORARY_REDIRECT = 307;
    int SC_BAD_REQUEST = 400;
    int SC_UNAUTHORIZED = 401;
    int SC_PAYMENT_REQUIRED = 402;
    int SC_FORBIDDEN = 403;
    int SC_NOT_FOUND = 404;
    int SC_METHOD_NOT_ALLOWED = 405;
    int SC_NOT_ACCEPTABLE = 406;
    int SC_PROXY_AUTHENTICATION_REQUIRED = 407;
    int SC_REQUEST_TIMEOUT = 408;
    int SC_CONFLICT = 409;
    int SC_GONE = 410;
    int SC_LENGTH_REQUIRED = 411;
    int SC_PRECONDITION_FAILED = 412;
    int SC_REQUEST_ENTITY_TOO_LARGE = 413;
    int SC_REQUEST_URI_TOO_LONG = 414;
    int SC_UNSUPPORTED_MEDIA_TYPE = 415;
    int SC_REQUESTED_RANGE_NOT_SATISFIABLE = 416;
    int SC_EXPECTATION_FAILED = 417;
    int SC_INTERNAL_SERVER_ERROR = 500;
    int SC_NOT_IMPLEMENTED = 501;
    int SC_BAD_GATEWAY = 502;
    int SC_SERVICE_UNAVAILABLE = 503;
    int SC_GATEWAY_TIMEOUT = 504;
    int SC_HTTP_VERSION_NOT_SUPPORTED = 505;
</code></pre>

<h4 id="2-下载文件">2、下载文件</h4>

<ol>
<li>向浏览器输出消息 （一直在讲，就不说了）</li>

<li><p>下载文件</p>

<ol>
<li>要获取下载文件的路径</li>
<li>下载的文件名是啥？</li>
<li>设置想办法让浏览器能够支持下载我们需要的东西</li>
<li>获取下载文件的输入流</li>
<li>创建缓冲区</li>
<li>获取OutputStream对象</li>
<li>将FileOutputStream流写入到buffer缓冲区</li>

<li><p>使用OutputStream将缓冲区中的数据输出到客户端！</p>

<pre><code class="language-java">@Override
protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
// 1. 要获取下载文件的路径
String realPath = &quot;F:\\班级管理\\西开【19525】\\2、代码\\JavaWeb\\javaweb-02-servlet\\response\\target\\classes\\秦疆.png&quot;;
System.out.println(&quot;下载文件的路径：&quot;+realPath);
// 2. 下载的文件名是啥？
String fileName = realPath.substring(realPath.lastIndexOf(&quot;\\&quot;) + 1);
// 3. 设置想办法让浏览器能够支持(Content-Disposition)下载我们需要的东西,中文文件名URLEncoder.encode编码，否则有可能乱码
resp.setHeader(&quot;Content-Disposition&quot;,&quot;attachment;filename=&quot;+URLEncoder.encode(fileName,&quot;UTF-8&quot;));
// 4. 获取下载文件的输入流
FileInputStream in = new FileInputStream(realPath);
// 5. 创建缓冲区
int len = 0;
byte[] buffer = new byte[1024];
// 6. 获取OutputStream对象
ServletOutputStream out = resp.getOutputStream();
// 7. 将FileOutputStream流写入到buffer缓冲区,使用OutputStream将缓冲区中的数据输出到客户端！
while ((len=in.read(buffer))&gt;0){
out.write(buffer,0,len);
}

in.close();
out.close();
}
</code></pre></li>
</ol></li>
</ol>

<h4 id="3-验证码功能">3、验证码功能</h4>

<p>验证怎么来的？</p>

<ul>
<li>前端实现</li>

<li><p>后端实现，需要用到 Java 的图片类，生产一个图片</p>

<pre><code class="language-java">package com.kuang.servlet;

import javax.imageio.ImageIO;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import java.awt.*;
import java.awt.image.BufferedImage;
import java.io.IOException;
import java.util.Random;

public class images/JavaWeb.assetservlet extends HttpServlet {

@Override
protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {

    //如何让浏览器3秒自动刷新一次;
    resp.setHeader(&quot;refresh&quot;,&quot;3&quot;);
        
    //在内存中创建一个图片
    BufferedImage image = new BufferedImage(80,20,BufferedImage.TYPE_INT_RGB);
    //得到图片
    Graphics2D g = (Graphics2D) image.getGraphics(); //笔
    //设置图片的背景颜色
    g.setColor(Color.white);
    g.fillRect(0,0,80,20);
    //给图片写数据
    g.setColor(Color.BLUE);
    g.setFont(new Font(null,Font.BOLD,20));
    g.drawString(makeNum(),0,20);

    //告诉浏览器，这个请求用图片的方式打开
    resp.setContentType(&quot;image/jpeg&quot;);
    //网站存在缓存，不让浏览器缓存
    resp.setDateHeader(&quot;expires&quot;,-1);
    resp.setHeader(&quot;Cache-Control&quot;,&quot;no-cache&quot;);
    resp.setHeader(&quot;Pragma&quot;,&quot;no-cache&quot;);

    //把图片写给浏览器
    ImageIO.write(image,&quot;jpg&quot;, resp.getOutputStream());

}

//生成随机数
private String makeNum(){
    Random random = new Random();
    String num = random.nextInt(9999999) + &quot;&quot;;
    StringBuffer sb = new StringBuffer();
    for (int i = 0; i &lt; 7-num.length() ; i++) {
        sb.append(&quot;0&quot;);
    }
    num = sb.toString() + num;
    return num;
}


@Override
protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
    doGet(req, resp);
}
}

</code></pre></li>
</ul>

<h4 id="4-实现重定向">4、实现重定向</h4>

<p><img src="/images/JavaWeb.assets/1567931587955.png" alt="1567931587955" /></p>

<p>B一个web资源收到客户端A请求后，B他会通知A客户端去访问另外一个web资源C，这个过程叫重定向</p>

<p>常见场景：</p>

<ul>
<li><p>用户登录</p>

<pre><code class="language-java">void sendRedirect(String var1) throws IOException;
</code></pre></li>
</ul>

<p>测试：</p>

<pre><code class="language-java">@Override
protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {

    /*
        resp.setHeader(&quot;Location&quot;,&quot;/r/img&quot;);
        resp.setStatus(302);
         */
    resp.sendRedirect(&quot;/r/img&quot;);//重定向
}
</code></pre>

<p>面试题：请你聊聊重定向和转发的区别？</p>

<p>相同点</p>

<ul>
<li>页面都会实现跳转</li>
</ul>

<p>不同点</p>

<ul>
<li>请求转发的时候，url不会产生变化</li>
<li>重定向时候，url地址栏会发生变化；</li>
</ul>

<p><img src="/images/JavaWeb.assets/1567932163430.png" alt="1567932163430" /></p>

<h4 id="5-简单实现登录重定向">5、简单实现登录重定向</h4>

<pre><code class="language-jsp">&lt;%--这里提交的路径，需要寻找到项目的路径--%&gt;
&lt;%--${pageContext.request.contextPath}代表当前的项目--%&gt;

&lt;form action=&quot;${pageContext.request.contextPath}/login&quot; method=&quot;get&quot;&gt;
    用户名：&lt;input type=&quot;text&quot; name=&quot;username&quot;&gt; &lt;br&gt;
    密码：&lt;input type=&quot;password&quot; name=&quot;password&quot;&gt; &lt;br&gt;
    &lt;input type=&quot;submit&quot;&gt;
&lt;/form&gt;

</code></pre>

<pre><code class="language-JAVA">
    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        //处理请求
        String username = req.getParameter(&quot;username&quot;);
        String password = req.getParameter(&quot;password&quot;);

        System.out.println(username+&quot;:&quot;+password);

        //重定向时候一定要注意，路径问题，否则404；
        resp.sendRedirect(&quot;/r/success.jsp&quot;);
    }

</code></pre>

<pre><code class="language-xml">  &lt;servlet&gt;
    &lt;servlet-name&gt;requset&lt;/servlet-name&gt;
    &lt;servlet-class&gt;com.kuang.servlet.RequestTest&lt;/servlet-class&gt;
  &lt;/servlet&gt;
  &lt;servlet-mapping&gt;
    &lt;servlet-name&gt;requset&lt;/servlet-name&gt;
    &lt;url-pattern&gt;/login&lt;/url-pattern&gt;
  &lt;/servlet-mapping&gt;
</code></pre>

<pre><code class="language-jsp">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Title&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;

&lt;h1&gt;Success&lt;/h1&gt;

&lt;/body&gt;
&lt;/html&gt;

</code></pre>

<h3 id="6-7-httpservletrequest">6.7、HttpServletRequest</h3>

<p>HttpServletRequest代表客户端的请求，用户通过Http协议访问服务器，HTTP请求中的所有信息会被封装到HttpServletRequest，通过这个HttpServletRequest的方法，获得客户端的所有信息；</p>

<p><img src="/images/JavaWeb.assets/1567933996830.png" alt="1567933996830" /></p>

<p><img src="/images/JavaWeb.assets/1567934023106.png" alt="1567934023106" /></p>

<h4 id="获取参数-请求转发">获取参数，请求转发</h4>

<p><img src="/images/JavaWeb.assets/1567934110794.png" alt="1567934110794" /></p>

<pre><code class="language-java">@Override
protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {

    req.setCharacterEncoding(&quot;utf-8&quot;);
    resp.setCharacterEncoding(&quot;utf-8&quot;);

    String username = req.getParameter(&quot;username&quot;);
    String password = req.getParameter(&quot;password&quot;);
    String[] hobbys = req.getParameterValues(&quot;hobbys&quot;);
    System.out.println(&quot;=============================&quot;);
    //后台接收中文乱码问题
    System.out.println(username);
    System.out.println(password);
    System.out.println(Arrays.toString(hobbys));
    System.out.println(&quot;=============================&quot;);


    System.out.println(req.getContextPath());
    //通过请求转发
    //这里的 / 代表当前的web应用
    req.getRequestDispatcher(&quot;/success.jsp&quot;).forward(req,resp);

}
</code></pre>

<p><strong>面试题：请你聊聊重定向和转发的区别？</strong></p>

<p>相同点</p>

<ul>
<li>页面都会实现跳转</li>
</ul>

<p>不同点</p>

<ul>
<li>请求转发的时候，url不会产生变化   307</li>
<li>重定向时候，url地址栏会发生变化； 302</li>
</ul>

<h2 id="7-cookie-session">7、Cookie、Session</h2>

<h3 id="7-1-会话">7.1、会话</h3>

<p><strong>会话</strong>：用户打开一个浏览器，点击了很多超链接，访问多个web资源，关闭浏览器，这个过程可以称之为会话；</p>

<p><strong>有状态会话</strong>：一个同学来过教室，下次再来教室，我们会知道这个同学，曾经来过，称之为有状态会话；</p>

<p><strong>你能怎么证明你是西开的学生？</strong></p>

<p>你              西开</p>

<ol>
<li>发票                西开给你发票</li>
<li>学校登记        西开标记你来过了</li>
</ol>

<p><strong>一个网站，怎么证明你来过？</strong></p>

<p>客户端              服务端</p>

<ol>
<li>服务端给客户端一个 信件，客户端下次访问服务端带上信件就可以了； cookie</li>
<li>服务器登记你来过了，下次你来的时候我来匹配你； seesion</li>
</ol>

<h3 id="7-2-保存会话的两种技术">7.2、保存会话的两种技术</h3>

<p><strong>cookie</strong></p>

<ul>
<li>客户端技术   （响应，请求）</li>
</ul>

<p><strong>session</strong></p>

<ul>
<li>服务器技术，利用这个技术，可以保存用户的会话信息？ 我们可以把信息或者数据放在Session中！</li>
</ul>

<p>常见常见：网站登录之后，你下次不用再登录了，第二次访问直接就上去了！</p>

<h3 id="7-3-cookie">7.3、Cookie</h3>

<p><img src="/images/JavaWeb.assets/1568344447291.png" alt="1568344447291" /></p>

<ol>
<li>从请求中拿到cookie信息</li>

<li><p>服务器响应给客户端cookie</p>

<pre><code class="language-java">Cookie[] cookies = req.getCookies(); //获得Cookie
cookie.getName(); //获得cookie中的key
cookie.getValue(); //获得cookie中的vlaue
new Cookie(&quot;lastLoginTime&quot;, System.currentTimeMillis()+&quot;&quot;); //新建一个cookie
cookie.setMaxAge(24*60*60); //设置cookie的有效期
resp.addCookie(cookie); //响应给客户端一个cookie
</code></pre></li>
</ol>

<p><strong>cookie：一般会保存在本地的 用户目录下 appdata；</strong></p>

<p>一个网站cookie是否存在上限！<strong>聊聊细节问题</strong></p>

<ul>
<li>一个Cookie只能保存一个信息；</li>
<li>一个web站点可以给浏览器发送多个cookie，最多存放20个cookie；</li>
<li>Cookie大小有限制4kb；</li>
<li>300个cookie浏览器上限</li>
</ul>

<p><strong>删除Cookie；</strong></p>

<ul>
<li>不设置有效期，关闭浏览器，自动失效；</li>
<li>设置有效期时间为 0 ；</li>
</ul>

<p><strong>编码解码：</strong></p>

<pre><code class="language-java">URLEncoder.encode(&quot;秦疆&quot;,&quot;utf-8&quot;)
URLDecoder.decode(cookie.getValue(),&quot;UTF-8&quot;)
</code></pre>

<h3 id="7-4-session-重点">7.4、Session（重点）</h3>

<p><img src="/images/JavaWeb.assets/1568344560794.png" alt="1568344560794" /></p>

<p>什么是Session：</p>

<ul>
<li>服务器会给每一个用户（浏览器）创建一个Seesion对象；</li>
<li>一个Seesion独占一个浏览器，只要浏览器没有关闭，这个Session就存在；</li>
<li>用户登录之后，整个网站它都可以访问！&ndash;&gt; 保存用户的信息；保存购物车的信息…..</li>
</ul>

<p><img src="/images/JavaWeb.assets/1568342773861.png" alt="1568342773861" /></p>

<p>Session和cookie的区别：</p>

<ul>
<li>Cookie是把用户的数据写给用户的浏览器，浏览器保存 （可以保存多个）</li>
<li>Session把用户的数据写到用户独占Session中，服务器端保存  （保存重要的信息，减少服务器资源的浪费）</li>
<li>Session对象由服务创建；</li>
</ul>

<p>使用场景：</p>

<ul>
<li>保存一个登录用户的信息；</li>
<li>购物车信息；</li>
<li>在整个网站中经常会使用的数据，我们将它保存在Session中；</li>
</ul>

<p>使用Session：</p>

<pre><code class="language-java">package com.kuang.servlet;

import com.kuang.pojo.Person;

import javax.servlet.ServletException;
import javax.servlet.http.*;
import java.io.IOException;

public class SessionDemo01 extends HttpServlet {
    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        
        //解决乱码问题
        req.setCharacterEncoding(&quot;UTF-8&quot;);
        resp.setCharacterEncoding(&quot;UTF-8&quot;);
        resp.setContentType(&quot;text/html;charset=utf-8&quot;);
        
        //得到Session
        HttpSession session = req.getSession();
        //给Session中存东西
        session.setAttribute(&quot;name&quot;,new Person(&quot;秦疆&quot;,1));
        //获取Session的ID
        String sessionId = session.getId();

        //判断Session是不是新创建
        if (session.isNew()){
            resp.getWriter().write(&quot;session创建成功,ID:&quot;+sessionId);
        }else {
            resp.getWriter().write(&quot;session以及在服务器中存在了,ID:&quot;+sessionId);
        }

        //Session创建的时候做了什么事情；
//        Cookie cookie = new Cookie(&quot;JSESSIONID&quot;,sessionId);
//        resp.addCookie(cookie);

    }

    @Override
    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        doGet(req, resp);
    }
}

//得到Session
HttpSession session = req.getSession();

Person person = (Person) session.getAttribute(&quot;name&quot;);

System.out.println(person.toString());

HttpSession session = req.getSession();
session.removeAttribute(&quot;name&quot;);
//手动注销Session
session.invalidate();
</code></pre>

<p><strong>会话自动过期：web.xml配置</strong></p>

<pre><code class="language-xml">&lt;!--设置Session默认的失效时间--&gt;
&lt;session-config&gt;
    &lt;!--15分钟后Session自动失效，以分钟为单位--&gt;
    &lt;session-timeout&gt;15&lt;/session-timeout&gt;
&lt;/session-config&gt;
</code></pre>

<p><img src="/images/JavaWeb.assets/1568344679763.png" alt="1568344679763" /></p>

<h2 id="8-jsp">8、JSP</h2>

<h3 id="8-1-什么是jsp">8.1、什么是JSP</h3>

<p>Java Server Pages ： Java服务器端页面，也和Servlet一样，用于动态Web技术！</p>

<p>最大的特点：</p>

<ul>
<li>写JSP就像在写HTML</li>
<li>区别：

<ul>
<li>HTML只给用户提供静态的数据</li>
<li>JSP页面中可以嵌入JAVA代码，为用户提供动态数据；</li>
</ul></li>
</ul>

<h3 id="8-2-jsp原理">8.2、JSP原理</h3>

<p>思路：JSP到底怎么执行的！</p>

<ul>
<li><p>代码层面没有任何问题</p></li>

<li><p>服务器内部工作</p></li>
</ul>

<p>tomcat中有一个work目录；</p>

<p>IDEA中使用Tomcat的会在IDEA的tomcat中生产一个work目录</p>

<p><img src="/images/JavaWeb.assets/1568345873736.png" alt="1568345873736" /></p>

<p>我电脑的地址：</p>

<pre><code class="language-java">  C:\Users\Administrator\.IntelliJIdea2018.1\system\tomcat\Unnamed_javaweb-session-cookie\work\Catalina\localhost\ROOT\org\apache\jsp
</code></pre>

<p>发现页面转变成了Java程序！</p>

<p><img src="/images/JavaWeb.assets/1568345948307.png" alt="1568345948307" /></p>

<p><strong>浏览器向服务器发送请求，不管访问什么资源，其实都是在访问Servlet！</strong></p>

<p>JSP最终也会被转换成为一个Java类！</p>

<p><strong>JSP 本质上就是一个Servlet</strong></p>

<pre><code class="language-java">//初始化
  public void _jspInit() {
      
  }
//销毁
  public void _jspDestroy() {
  }
//JSPService
  public void _jspService(.HttpServletRequest request,HttpServletResponse response)
      
</code></pre>

<ol>
<li><p>判断请求</p></li>

<li><p>内置一些对象</p>

<pre><code class="language-java">final javax.servlet.jsp.PageContext pageContext;  //页面上下文
javax.servlet.http.HttpSession session = null;    //session
final javax.servlet.ServletContext application;   //applicationContext
final javax.servlet.ServletConfig config;         //config
javax.servlet.jsp.JspWriter out = null;           //out
final java.lang.Object page = this;               //page：当前
HttpServletRequest request                        //请求
HttpServletResponse response                      //响应
</code></pre></li>

<li><p>输出页面前增加的代码</p>

<pre><code class="language-java">response.setContentType(&quot;text/html&quot;);       //设置响应的页面类型
pageContext = _jspxFactory.getPageContext(this, request, response,
                                         null, true, 8192, true);
_jspx_page_context = pageContext;
application = pageContext.getServletContext();
config = pageContext.getServletConfig();
session = pageContext.getSession();
out = pageContext.getOut();
_jspx_out = out;
</code></pre></li>

<li><p>以上的这些个对象我们可以在JSP页面中直接使用！</p></li>
</ol>

<p><img src="/images/JavaWeb.assets/1568347078207.png" alt="1568347078207" /></p>

<p>在JSP页面中；</p>

<p>只要是 JAVA代码就会原封不动的输出；</p>

<p>如果是HTML代码，就会被转换为：</p>

<pre><code class="language-java">out.write(&quot;&lt;html&gt;\r\n&quot;);
</code></pre>

<p>这样的格式，输出到前端！</p>

<h3 id="8-3-jsp基础语法">8.3、JSP基础语法</h3>

<p>任何语言都有自己的语法，JAVA中有,。 JSP 作为java技术的一种应用，它拥有一些自己扩充的语法（了解，知道即可！），Java所有语法都支持！</p>

<h4 id="jsp表达式"><strong>JSP表达式</strong></h4>

<pre><code class="language-jsp">  &lt;%--JSP表达式
  作用：用来将程序的输出，输出到客户端
  &lt;%= 变量或者表达式%&gt;
  --%&gt;
  &lt;%= new java.util.Date()%&gt;
</code></pre>

<h4 id="jsp脚本片段"><strong>jsp脚本片段</strong></h4>

<pre><code class="language-jsp">
  &lt;%--jsp脚本片段--%&gt;
  &lt;%
    int sum = 0;
    for (int i = 1; i &lt;=100 ; i++) {
      sum+=i;
    }
    out.println(&quot;&lt;h1&gt;Sum=&quot;+sum+&quot;&lt;/h1&gt;&quot;);
  %&gt;

</code></pre>

<p><strong>脚本片段的再实现</strong></p>

<pre><code class="language-jsp">  &lt;%
    int x = 10;
    out.println(x);
  %&gt;
  &lt;p&gt;这是一个JSP文档&lt;/p&gt;
  &lt;%
    int y = 2;
    out.println(y);
  %&gt;

  &lt;hr&gt;


  &lt;%--在代码嵌入HTML元素--%&gt;
  &lt;%
    for (int i = 0; i &lt; 5; i++) {
  %&gt;
    &lt;h1&gt;Hello,World  &lt;%=i%&gt; &lt;/h1&gt;
  &lt;%
    }
  %&gt;
</code></pre>

<h4 id="jsp声明">JSP声明</h4>

<pre><code class="language-jsp">  &lt;%!
    static {
      System.out.println(&quot;Loading Servlet!&quot;);
    }

    private int globalVar = 0;

    public void kuang(){
      System.out.println(&quot;进入了方法Kuang！&quot;);
    }
  %&gt;
</code></pre>

<p>JSP声明：会被编译到JSP生成Java的类中！其他的，就会被生成到_jspService方法中！</p>

<p>在JSP，嵌入Java代码即可！</p>

<pre><code class="language-jsp">&lt;%%&gt;
&lt;%=%&gt;
&lt;%!%&gt;

&lt;%--注释--%&gt;
</code></pre>

<p>JSP的注释，不会在客户端显示，HTML就会！</p>

<h3 id="8-4-jsp指令">8.4、JSP指令</h3>

<pre><code class="language-jsp">&lt;%@page args.... %&gt;
&lt;%@include file=&quot;&quot;%&gt;

&lt;%--@include会将两个页面合二为一--%&gt;

&lt;%@include file=&quot;common/header.jsp&quot;%&gt;
&lt;h1&gt;网页主体&lt;/h1&gt;

&lt;%@include file=&quot;common/footer.jsp&quot;%&gt;

&lt;hr&gt;


&lt;%--jSP标签
    jsp:include：拼接页面，本质还是三个
    --%&gt;
&lt;jsp:include page=&quot;/common/header.jsp&quot;/&gt;
&lt;h1&gt;网页主体&lt;/h1&gt;
&lt;jsp:include page=&quot;/common/footer.jsp&quot;/&gt;

</code></pre>

<h3 id="8-5-9大内置对象">8.5、9大内置对象</h3>

<ul>
<li>PageContext    存东西</li>
<li>Request     存东西</li>
<li>Response</li>
<li>Session      存东西</li>
<li>Application   【SerlvetContext】   存东西</li>
<li>config    【SerlvetConfig】</li>
<li>out</li>
<li>page ，不用了解</li>

<li><p>exception</p>

<pre><code class="language-java">pageContext.setAttribute(&quot;name1&quot;,&quot;秦疆1号&quot;); //保存的数据只在一个页面中有效
request.setAttribute(&quot;name2&quot;,&quot;秦疆2号&quot;); //保存的数据只在一次请求中有效，请求转发会携带这个数据
session.setAttribute(&quot;name3&quot;,&quot;秦疆3号&quot;); //保存的数据只在一次会话中有效，从打开浏览器到关闭浏览器
application.setAttribute(&quot;name4&quot;,&quot;秦疆4号&quot;);  //保存的数据只在服务器中有效，从打开服务器到关闭服务器
</code></pre></li>
</ul>

<p>request：客户端向服务器发送请求，产生的数据，用户看完就没用了，比如：新闻，用户看完没用的！</p>

<p>session：客户端向服务器发送请求，产生的数据，用户用完一会还有用，比如：购物车；</p>

<p>application：客户端向服务器发送请求，产生的数据，一个用户用完了，其他用户还可能使用，比如：聊天数据；</p>

<h3 id="8-6-jsp标签-jstl标签-el表达式">8.6、JSP标签、JSTL标签、EL表达式</h3>

<pre><code class="language-xml">&lt;!-- JSTL表达式的依赖 --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;javax.servlet.jsp.jstl&lt;/groupId&gt;
    &lt;artifactId&gt;jstl-api&lt;/artifactId&gt;
    &lt;version&gt;1.2&lt;/version&gt;
&lt;/dependency&gt;
&lt;!-- standard标签库 --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;taglibs&lt;/groupId&gt;
    &lt;artifactId&gt;standard&lt;/artifactId&gt;
    &lt;version&gt;1.1.2&lt;/version&gt;
&lt;/dependency&gt;

</code></pre>

<p>EL表达式：  ${ }</p>

<ul>
<li><strong>获取数据</strong></li>
<li><strong>执行运算</strong></li>
<li><strong>获取web开发的常用对象</strong></li>
</ul>

<p><strong>JSP标签</strong></p>

<pre><code class="language-jsp">&lt;%--jsp:include--%&gt;

&lt;%--
http://localhost:8080/jsptag.jsp?name=kuangshen&amp;age=12
--%&gt;

&lt;jsp:forward page=&quot;/jsptag2.jsp&quot;&gt;
    &lt;jsp:param name=&quot;name&quot; value=&quot;kuangshen&quot;&gt;&lt;/jsp:param&gt;
    &lt;jsp:param name=&quot;age&quot; value=&quot;12&quot;&gt;&lt;/jsp:param&gt;
&lt;/jsp:forward&gt;
</code></pre>

<p><strong>JSTL表达式</strong></p>

<p>JSTL标签库的使用就是为了弥补HTML标签的不足；它自定义许多标签，可以供我们使用，标签的功能和Java代码一样！</p>

<p><strong>格式化标签</strong></p>

<p><strong>SQL标签</strong></p>

<p><strong>XML 标签</strong></p>

<p><strong>核心标签</strong> （掌握部分）</p>

<p><img src="/images/JavaWeb.assets/1568362473764.png" alt="1568362473764" /></p>

<p><strong>JSTL标签库使用步骤</strong></p>

<ul>
<li>引入对应的 taglib</li>
<li>使用其中的方法</li>
<li><strong>在Tomcat 也需要引入 jstl的包，否则会报错：JSTL解析错误</strong></li>
</ul>

<p>c：if</p>

<pre><code class="language-jsp">&lt;head&gt;
    &lt;title&gt;Title&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;


&lt;h4&gt;if测试&lt;/h4&gt;

&lt;hr&gt;

&lt;form action=&quot;coreif.jsp&quot; method=&quot;get&quot;&gt;
    &lt;%--
    EL表达式获取表单中的数据
    ${param.参数名}
    --%&gt;
    &lt;input type=&quot;text&quot; name=&quot;username&quot; value=&quot;${param.username}&quot;&gt;
    &lt;input type=&quot;submit&quot; value=&quot;登录&quot;&gt;
&lt;/form&gt;

&lt;%--判断如果提交的用户名是管理员，则登录成功--%&gt;
&lt;c:if test=&quot;${param.username=='admin'}&quot; var=&quot;isAdmin&quot;&gt;
    &lt;c:out value=&quot;管理员欢迎您！&quot;/&gt;
&lt;/c:if&gt;

&lt;%--自闭合标签--%&gt;
&lt;c:out value=&quot;${isAdmin}&quot;/&gt;

&lt;/body&gt;
</code></pre>

<p>c:choose   c:when</p>

<pre><code class="language-jsp">&lt;body&gt;

&lt;%--定义一个变量score，值为85--%&gt;
&lt;c:set var=&quot;score&quot; value=&quot;55&quot;/&gt;

&lt;c:choose&gt;
    &lt;c:when test=&quot;${score&gt;=90}&quot;&gt;
        你的成绩为优秀
    &lt;/c:when&gt;
    &lt;c:when test=&quot;${score&gt;=80}&quot;&gt;
        你的成绩为一般
    &lt;/c:when&gt;
    &lt;c:when test=&quot;${score&gt;=70}&quot;&gt;
        你的成绩为良好
    &lt;/c:when&gt;
    &lt;c:when test=&quot;${score&lt;=60}&quot;&gt;
        你的成绩为不及格
    &lt;/c:when&gt;
&lt;/c:choose&gt;

&lt;/body&gt;
</code></pre>

<p>c:forEach</p>

<pre><code class="language-jsp">&lt;%

    ArrayList&lt;String&gt; people = new ArrayList&lt;&gt;();
    people.add(0,&quot;张三&quot;);
    people.add(1,&quot;李四&quot;);
    people.add(2,&quot;王五&quot;);
    people.add(3,&quot;赵六&quot;);
    people.add(4,&quot;田六&quot;);
    request.setAttribute(&quot;list&quot;,people);
%&gt;


&lt;%--
var , 每一次遍历出来的变量
items, 要遍历的对象
begin,   哪里开始
end,     到哪里
step,   步长
--%&gt;
&lt;c:forEach var=&quot;people&quot; items=&quot;${list}&quot;&gt;
    &lt;c:out value=&quot;${people}&quot;/&gt; &lt;br&gt;
&lt;/c:forEach&gt;

&lt;hr&gt;

&lt;c:forEach var=&quot;people&quot; items=&quot;${list}&quot; begin=&quot;1&quot; end=&quot;3&quot; step=&quot;1&quot; &gt;
    &lt;c:out value=&quot;${people}&quot;/&gt; &lt;br&gt;
&lt;/c:forEach&gt;

</code></pre>

<h2 id="9-javabean">9、JavaBean</h2>

<p>实体类</p>

<p>JavaBean有特定的写法：</p>

<ul>
<li>必须要有一个无参构造</li>
<li>属性必须私有化</li>
<li>必须有对应的get/set方法；</li>
</ul>

<p>一般用来和数据库的字段做映射  ORM；</p>

<p>ORM ：对象关系映射</p>

<ul>
<li>表&mdash;&gt;类</li>
<li>字段&ndash;&gt;属性</li>
<li>行记录&mdash;-&gt;对象</li>
</ul>

<p><strong>people表</strong></p>

<table>
<thead>
<tr>
<th>id</th>
<th>name</th>
<th>age</th>
<th>address</th>
</tr>
</thead>

<tbody>
<tr>
<td>1</td>
<td>秦疆1号</td>
<td>3</td>
<td>西安</td>
</tr>

<tr>
<td>2</td>
<td>秦疆2号</td>
<td>18</td>
<td>西安</td>
</tr>

<tr>
<td>3</td>
<td>秦疆3号</td>
<td>100</td>
<td>西安</td>
</tr>
</tbody>
</table>

<pre><code class="language-java">class People{
    private int id;
    private String name;
    private int id;
    private String address;
}

class A{
    new People(1,&quot;秦疆1号&quot;,3，&quot;西安&quot;);
    new People(2,&quot;秦疆2号&quot;,3，&quot;西安&quot;);
    new People(3,&quot;秦疆3号&quot;,3，&quot;西安&quot;);
}
</code></pre>

<ul>
<li>过滤器</li>
<li>文件上传</li>
<li>邮件发送</li>
<li>JDBC 复习 ： 如何使用JDBC ,  JDBC crud， jdbc 事务</li>
</ul>

<h2 id="10-mvc三层架构">10、MVC三层架构</h2>

<p>什么是MVC：  Model     view     Controller  模型、视图、控制器</p>

<h3 id="10-1-早些年">10.1、早些年</h3>

<p><img src="/images/JavaWeb.assets/1568423664332.png" alt="1568423664332" /></p>

<p>用户直接访问控制层，控制层就可以直接操作数据库；</p>

<pre><code class="language-java">servlet--CRUD--&gt;数据库
弊端：程序十分臃肿，不利于维护  
servlet的代码中：处理请求、响应、视图跳转、处理JDBC、处理业务代码、处理逻辑代码

架构：没有什么是加一层解决不了的！
程序猿调用
|
JDBC
|
Mysql Oracle SqlServer ....
</code></pre>

<h3 id="10-2-mvc三层架构">10.2、MVC三层架构</h3>

<p><img src="/images/JavaWeb.assets/1568424227281.png" alt="1568424227281" /></p>

<p>Model</p>

<ul>
<li>业务处理 ：业务逻辑（Service）</li>
<li>数据持久层：CRUD   （Dao）</li>
</ul>

<p>View</p>

<ul>
<li>展示数据</li>
<li>提供链接发起Servlet请求 （a，form，img…）</li>
</ul>

<p>Controller  （Servlet）</p>

<ul>
<li><p>接收用户的请求 ：（req：请求参数、Session信息….）</p></li>

<li><p>交给业务层处理对应的代码</p></li>

<li><p>控制视图的跳转</p>

<pre><code class="language-java">登录---&gt;接收用户的登录请求---&gt;处理用户的请求（获取用户登录的参数，username，password）----&gt;交给业务层处理登录业务（判断用户名密码是否正确：事务）---&gt;Dao层查询用户名和密码是否正确--&gt;数据库
</code></pre></li>
</ul>

<h2 id="11-filter-重点">11、Filter （重点）</h2>

<p>Filter：过滤器 ，用来过滤网站的数据；</p>

<ul>
<li>处理中文乱码</li>
<li>登录验证….</li>
</ul>

<p><img src="/images/JavaWeb.assets/1568424858708.png" alt="1568424858708" /></p>

<p>Filter开发步骤：</p>

<ol>
<li><p>导包</p></li>

<li><p>编写过滤器</p>

<ol>
<li>导包不要错</li>
</ol>

<p><img src="/images/JavaWeb.assets/1568425162525.png" alt="1568425162525" /></p>

<p>实现Filter接口，重写对应的方法即可</p>

<pre><code class="language-java">  public class CharacterEncodingFilter implements Filter {
      
      //初始化：web服务器启动，就以及初始化了，随时等待过滤对象出现！
      public void init(FilterConfig filterConfig) throws ServletException {
          System.out.println(&quot;CharacterEncodingFilter初始化&quot;);
      }
      
      //Chain : 链
      /*
      1. 过滤中的所有代码，在过滤特定请求的时候都会执行
      2. 必须要让过滤器继续同行
          chain.doFilter(request,response);
       */
      public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {
          request.setCharacterEncoding(&quot;utf-8&quot;);
          response.setCharacterEncoding(&quot;utf-8&quot;);
          response.setContentType(&quot;text/html;charset=UTF-8&quot;);
      
          System.out.println(&quot;CharacterEncodingFilter执行前....&quot;);
          chain.doFilter(request,response); //让我们的请求继续走，如果不写，程序到这里就被拦截停止！
          System.out.println(&quot;CharacterEncodingFilter执行后....&quot;);
      }
      
      //销毁：web服务器关闭的时候，过滤会销毁
      public void destroy() {
          System.out.println(&quot;CharacterEncodingFilter销毁&quot;);
      }
  }
      
</code></pre></li>

<li><p>在web.xml中配置 Filter</p>

<pre><code class="language-xml">&lt;filter&gt;
   &lt;filter-name&gt;CharacterEncodingFilter&lt;/filter-name&gt;
   &lt;filter-class&gt;com.kuang.filter.CharacterEncodingFilter&lt;/filter-class&gt;
&lt;/filter&gt;
&lt;filter-mapping&gt;
   &lt;filter-name&gt;CharacterEncodingFilter&lt;/filter-name&gt;
   &lt;!--只要是 /servlet的任何请求，会经过这个过滤器--&gt;
   &lt;url-pattern&gt;/servlet/*&lt;/url-pattern&gt;
   &lt;!--&lt;url-pattern&gt;/*&lt;/url-pattern&gt;--&gt;
&lt;/filter-mapping&gt;
</code></pre></li>
</ol>

<h2 id="12-监听器">12、监听器</h2>

<p>实现一个监听器的接口；（有N种）</p>

<ol>
<li>编写一个监听器</li>
</ol>

<p>实现监听器的接口…</p>

<pre><code class="language-java">   //统计网站在线人数 ： 统计session
   public class OnlineCountListener implements HttpSessionListener {
   
       //创建session监听： 看你的一举一动
       //一旦创建Session就会触发一次这个事件！
       public void sessionCreated(HttpSessionEvent se) {
           ServletContext ctx = se.getSession().getServletContext();
   
           System.out.println(se.getSession().getId());
   
           Integer onlineCount = (Integer) ctx.getAttribute(&quot;OnlineCount&quot;);
   
           if (onlineCount==null){
               onlineCount = new Integer(1);
           }else {
               int count = onlineCount.intValue();
               onlineCount = new Integer(count+1);
           }
   
           ctx.setAttribute(&quot;OnlineCount&quot;,onlineCount);
   
       }
   
       //销毁session监听
       //一旦销毁Session就会触发一次这个事件！
       public void sessionDestroyed(HttpSessionEvent se) {
           ServletContext ctx = se.getSession().getServletContext();
   
           Integer onlineCount = (Integer) ctx.getAttribute(&quot;OnlineCount&quot;);
   
           if (onlineCount==null){
               onlineCount = new Integer(0);
           }else {
               int count = onlineCount.intValue();
               onlineCount = new Integer(count-1);
           }
   
           ctx.setAttribute(&quot;OnlineCount&quot;,onlineCount);
   
       }
   
   
       /*
       Session销毁：
       1. 手动销毁  getSession().invalidate();
       2. 自动销毁
        */
   }
   
</code></pre>

<ol>
<li><p>web.xml中注册监听器</p>

<pre><code class="language-xml">&lt;!--注册监听器--&gt;
&lt;listener&gt;
   &lt;listener-class&gt;com.kuang.listener.OnlineCountListener&lt;/listener-class&gt;
&lt;/listener&gt;
</code></pre></li>

<li><p>看情况是否使用！</p></li>
</ol>

<h2 id="13-过滤器-监听器常见应用">13、过滤器、监听器常见应用</h2>

<p><strong>监听器：GUI编程中经常使用；</strong></p>

<pre><code class="language-java">public class TestPanel {
    public static void main(String[] args) {
        Frame frame = new Frame(&quot;中秋节快乐&quot;);  //新建一个窗体
        Panel panel = new Panel(null); //面板
        frame.setLayout(null); //设置窗体的布局

        frame.setBounds(300,300,500,500);
        frame.setBackground(new Color(0,0,255)); //设置背景颜色

        panel.setBounds(50,50,300,300);
        panel.setBackground(new Color(0,255,0)); //设置背景颜色

        frame.add(panel);

        frame.setVisible(true);

        //监听事件，监听关闭事件
        frame.addWindowListener(new WindowAdapter() {
            @Override
            public void windowClosing(WindowEvent e) {
                super.windowClosing(e);
            }
        });


    }
}
</code></pre>

<p>用户登录之后才能进入主页！用户注销后就不能进入主页了！</p>

<ol>
<li><p>用户登录之后，向Sesison中放入用户的数据</p></li>

<li><p>进入主页的时候要判断用户是否已经登录；要求：在过滤器中实现！</p>

<pre><code class="language-java">HttpServletRequest request = (HttpServletRequest) req;
HttpServletResponse response = (HttpServletResponse) resp;
   
if (request.getSession().getAttribute(Constant.USER_SESSION)==null){
   response.sendRedirect(&quot;/error.jsp&quot;);
}
   
chain.doFilter(request,response);
</code></pre></li>
</ol>

<h2 id="14-jdbc">14、JDBC</h2>

<p>什么是JDBC ： Java连接数据库！</p>

<p><img src="/images/JavaWeb.assets/1568439601825.png" alt="1568439601825" /></p>

<p>需要jar包的支持：</p>

<ul>
<li>java.sql</li>
<li>javax.sql</li>
<li>mysql-conneter-java…  连接驱动（必须要导入）</li>
</ul>

<p><strong>实验环境搭建</strong></p>

<pre><code class="language-sql">
CREATE TABLE users(
    id INT PRIMARY KEY,
    `name` VARCHAR(40),
    `password` VARCHAR(40),
    email VARCHAR(60),
    birthday DATE
);

INSERT INTO users(id,`name`,`password`,email,birthday)
VALUES(1,'张三','123456','zs@qq.com','2000-01-01');
INSERT INTO users(id,`name`,`password`,email,birthday)
VALUES(2,'李四','123456','ls@qq.com','2000-01-01');
INSERT INTO users(id,`name`,`password`,email,birthday)
VALUES(3,'王五','123456','ww@qq.com','2000-01-01');


SELECT	* FROM users;

</code></pre>

<p>导入数据库依赖</p>

<pre><code class="language-xml">&lt;!--mysql的驱动--&gt;
&lt;dependency&gt;
    &lt;groupId&gt;mysql&lt;/groupId&gt;
    &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;
    &lt;version&gt;5.1.47&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>

<p>IDEA中连接数据库：</p>

<p><img src="/images/JavaWeb.assets/1568440926845.png" alt="1568440926845" /></p>

<p><strong>JDBC 固定步骤：</strong></p>

<ol>
<li>加载驱动</li>
<li>连接数据库,代表数据库</li>
<li>向数据库发送SQL的对象Statement : CRUD</li>
<li>编写SQL （根据业务，不同的SQL）</li>
<li>执行SQL</li>

<li><p>关闭连接</p>

<pre><code class="language-java">public class TestJdbc {
public static void main(String[] args) throws ClassNotFoundException, SQLException {
    //配置信息
    //useUnicode=true&amp;characterEncoding=utf-8 解决中文乱码
    String url=&quot;jdbc:mysql://localhost:3306/jdbc?useUnicode=true&amp;characterEncoding=utf-8&quot;;
    String username = &quot;root&quot;;
    String password = &quot;123456&quot;;

    //1.加载驱动
    Class.forName(&quot;com.mysql.jdbc.Driver&quot;);
    //2.连接数据库,代表数据库
    Connection connection = DriverManager.getConnection(url, username, password);

    //3.向数据库发送SQL的对象Statement,PreparedStatement : CRUD
    Statement statement = connection.createStatement();

    //4.编写SQL
    String sql = &quot;select * from users&quot;;

    //5.执行查询SQL，返回一个 ResultSet  ： 结果集
    ResultSet rs = statement.executeQuery(sql);

    while (rs.next()){
        System.out.println(&quot;id=&quot;+rs.getObject(&quot;id&quot;));
        System.out.println(&quot;name=&quot;+rs.getObject(&quot;name&quot;));
        System.out.println(&quot;password=&quot;+rs.getObject(&quot;password&quot;));
        System.out.println(&quot;email=&quot;+rs.getObject(&quot;email&quot;));
        System.out.println(&quot;birthday=&quot;+rs.getObject(&quot;birthday&quot;));
    }

    //6.关闭连接，释放资源（一定要做） 先开后关
    rs.close();
    statement.close();
    connection.close();
}
}

</code></pre></li>
</ol>

<p><strong>预编译SQL</strong></p>

<pre><code class="language-java">public class TestJDBC2 {
    public static void main(String[] args) throws Exception {
        //配置信息
        //useUnicode=true&amp;characterEncoding=utf-8 解决中文乱码
        String url=&quot;jdbc:mysql://localhost:3306/jdbc?useUnicode=true&amp;characterEncoding=utf-8&quot;;
        String username = &quot;root&quot;;
        String password = &quot;123456&quot;;

        //1.加载驱动
        Class.forName(&quot;com.mysql.jdbc.Driver&quot;);
        //2.连接数据库,代表数据库
        Connection connection = DriverManager.getConnection(url, username, password);

        //3.编写SQL
        String sql = &quot;insert into  users(id, name, password, email, birthday) values (?,?,?,?,?);&quot;;

        //4.预编译
        PreparedStatement preparedStatement = connection.prepareStatement(sql);

        preparedStatement.setInt(1,2);//给第一个占位符？ 的值赋值为1；
        preparedStatement.setString(2,&quot;狂神说Java&quot;);//给第二个占位符？ 的值赋值为狂神说Java；
        preparedStatement.setString(3,&quot;123456&quot;);//给第三个占位符？ 的值赋值为123456；
        preparedStatement.setString(4,&quot;24736743@qq.com&quot;);//给第四个占位符？ 的值赋值为1；
        preparedStatement.setDate(5,new Date(new java.util.Date().getTime()));//给第五个占位符？ 的值赋值为new Date(new java.util.Date().getTime())；

        //5.执行SQL
        int i = preparedStatement.executeUpdate();

        if (i&gt;0){
            System.out.println(&quot;插入成功@&quot;);
        }

        //6.关闭连接，释放资源（一定要做） 先开后关
        preparedStatement.close();
        connection.close();
    }
}

</code></pre>

<p><strong>事务</strong></p>

<p>要么都成功，要么都失败！</p>

<p>ACID原则：保证数据的安全。</p>

<pre><code class="language-java">开启事务
事务提交  commit()
事务回滚  rollback()
关闭事务

转账：
A:1000
B:1000
    
A(900)   --100--&gt;   B(1100) 
</code></pre>

<p><strong>Junit单元测试</strong></p>

<p>依赖</p>

<pre><code class="language-xml">&lt;!--单元测试--&gt;
&lt;dependency&gt;
    &lt;groupId&gt;junit&lt;/groupId&gt;
    &lt;artifactId&gt;junit&lt;/artifactId&gt;
    &lt;version&gt;4.12&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>

<p>简单使用</p>

<p>@Test注解只有在方法上有效，只要加了这个注解的方法，就可以直接运行！</p>

<pre><code class="language-java">@Test
public void test(){
    System.out.println(&quot;Hello&quot;);
}
</code></pre>

<p><img src="/images/JavaWeb.assets/1568442261610.png" alt="1568442261610" /></p>

<p>失败的时候是红色：</p>

<p><img src="/images/JavaWeb.assets/1568442289597.png" alt="1568442289597" /></p>

<p><strong>搭建一个环境</strong></p>

<pre><code class="language-sql">CREATE TABLE account(
   id INT PRIMARY KEY AUTO_INCREMENT,
   `name` VARCHAR(40),
   money FLOAT
);

INSERT INTO account(`name`,money) VALUES('A',1000);
INSERT INTO account(`name`,money) VALUES('B',1000);
INSERT INTO account(`name`,money) VALUES('C',1000);
</code></pre>

<pre><code class="language-java">    @Test
    public void test() {
        //配置信息
        //useUnicode=true&amp;characterEncoding=utf-8 解决中文乱码
        String url=&quot;jdbc:mysql://localhost:3306/jdbc?useUnicode=true&amp;characterEncoding=utf-8&quot;;
        String username = &quot;root&quot;;
        String password = &quot;123456&quot;;

        Connection connection = null;

        //1.加载驱动
        try {
            Class.forName(&quot;com.mysql.jdbc.Driver&quot;);
            //2.连接数据库,代表数据库
             connection = DriverManager.getConnection(url, username, password);

            //3.通知数据库开启事务,false 开启
            connection.setAutoCommit(false);

            String sql = &quot;update account set money = money-100 where name = 'A'&quot;;
            connection.prepareStatement(sql).executeUpdate();

            //制造错误
            //int i = 1/0;

            String sql2 = &quot;update account set money = money+100 where name = 'B'&quot;;
            connection.prepareStatement(sql2).executeUpdate();

            connection.commit();//以上两条SQL都执行成功了，就提交事务！
            System.out.println(&quot;success&quot;);
        } catch (Exception e) {
            try {
                //如果出现异常，就通知数据库回滚事务
                connection.rollback();
            } catch (SQLException e1) {
                e1.printStackTrace();
            }
            e.printStackTrace();
        }finally {
            try {
                connection.close();
            } catch (SQLException e) {
                e.printStackTrace();
            }
        }
    }
</code></pre>

<p><a href="https://www.cnblogs.com/hellokuangshen"><strong>原文出处</strong></a></p>

        </div>

        
<div class="post-archive">
    <ul class="post-copyright">
        <li><strong>原文作者：</strong><a rel="author" href="https://failcom.github.io">failcom</a></li>
        <li style="word-break:break-all"><strong>原文链接：</strong><a href="https://failcom.github.io/post/JavaWeb/">https://failcom.github.io/post/JavaWeb/</a></li>
        <li><strong>版权声明：</strong>本作品采用<a rel="license" href="https://creativecommons.org/licenses/by-nc-nd/4.0/">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a>进行许可，非商业转载请注明出处（作者，原文链接），商业转载请联系作者获得授权。</li>
    </ul>
</div>
<br/>



        

<div class="post-archive">
    <h2>See Also</h2>
    <ul class="listing">
        
        <li><a href="/post/markdown/">markdown | 使用</a></li>
        
        <li><a href="/post/photo/">photo | 第一期</a></li>
        
        <li><a href="/about/">关于我</a></li>
        
        <li><a href="/archives/">归档</a></li>
        
        <li><a href="/search/">搜索</a></li>
        
    </ul>
</div>


        <div class="post-meta meta-tags">
            
            <ul class="clearfix">
                
                <li><a href='https://failcom.github.io/tags/JavaWeb'>JavaWeb</a></li>
                
            </ul>
            
        </div>
    </article>
    
    

    
    
</div>

                </div>

                <div id="secondary">
    <section class="widget">
        <form id="search" action='https://failcom.github.io/search/' method="get" accept-charset="utf-8" target="_blank" _lpchecked="1">
      
      <input type="text" name="q" maxlength="20" placeholder="Search">
      <input type="hidden" name="sitesearch" value="https://failcom.github.io">
      <button type="submit" class="submit icon-search"></button>
</form>
    </section>
    
    <section class="widget">
        <h3 class="widget-title">最近文章</h3>
<ul class="widget-list">
    
    <li>
        <a href="https://failcom.github.io/post/JavaWeb/" title="JavaWeb | 总结">JavaWeb | 总结</a>
    </li>
    
    <li>
        <a href="https://failcom.github.io/post/markdown/" title="markdown | 使用">markdown | 使用</a>
    </li>
    
    <li>
        <a href="https://failcom.github.io/post/photo/" title="photo | 第一期">photo | 第一期</a>
    </li>
    
</ul>
    </section>

    <section class="widget">
        <h3 class="widget-title">分类</h3>
<ul class="widget-list">
    
    <li><a href="https://failcom.github.io/categories/JavaWeb/">JavaWeb (1)</a></li>
    
    <li><a href="https://failcom.github.io/categories/markdown/">markdown (1)</a></li>
    
    <li><a href="https://failcom.github.io/categories/photo/">photo (1)</a></li>
    
</ul>
    </section>

    <section class="widget">
        <h3 class="widget-title">标签</h3>
<div class="tagcloud">
    
    <a href="https://failcom.github.io/tags/JavaWeb/">JavaWeb</a>
    
    <a href="https://failcom.github.io/tags/markdown/">markdown</a>
    
    <a href="https://failcom.github.io/tags/photo/">photo</a>
    
</div>
    </section>

    
<section class="widget">
    <h3 class="widget-title">友情链接</h3>
    <ul class="widget-list">
        
        <li>
            <a target="_blank" href="https://www.flysnow.org/" title="飞雪无情的博客">飞雪无情的博客</a>
        </li>
        
        <li>
            <a target="_blank" href="http://yuedu.baidu.com/ebook/14a722970740be1e640e9a3e" title="Android Gradle权威指南">Android Gradle权威指南</a>
        </li>
        
    </ul>
</section>


    <section class="widget">
        <h3 class="widget-title">其它</h3>
        <ul class="widget-list">
            <li><a href="https://failcom.github.io/index.xml">文章 RSS</a></li>
        </ul>
    </section>
</div>
            </div>
        </div>
    </div>
    <footer id="footer">
    <div class="container">
        &copy; 2019 <a href="https://failcom.github.io">failcom By failcom</a>.
        Powered by <a rel="nofollow noreferer noopener" href="https://gohugo.io" target="_blank">Hugo</a>.
        <a href="https://www.flysnow.org/" target="_blank">Theme</a> based on <a href="https://github.com/flysnow-org/maupassant-hugo" target="_blank">maupassant</a>.
        
    </div>
</footer>


    
    <script type="text/javascript">
        window.MathJax = {
            tex2jax: {
                inlineMath: [['$', '$']],
                processEscapes: true
                }
            };
    </script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML' async></script>


<a id="rocket" href="#top"></a>
<script type="text/javascript" src='/js/totop.js?v=0.0.0' async=""></script>



    <script type="text/javascript" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script>




    <script src='/js/douban.js'></script>

</body>

</html>